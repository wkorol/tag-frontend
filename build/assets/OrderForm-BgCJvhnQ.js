import{u as gr,r as o,j as e,l as hr,p as Se,M as Te,q as D,v as N,w as Ee,x as xr,h as fr}from"./index-CNW1FcbO.js";import{u as br,f as yr,g as Nr}from"./currency-D76eIQ4P.js";import{P as Ce,F as Pe,L as jr,b as vr}from"./orderNotes-CrCvq4UM.js";import{l as wr,u as kr,i as Fr}from"./scrollLock-BK_fv_5M.js";import{C as Sr}from"./calendar-D0jlBLYq.js";import{U as Ae}from"./users-BfiDf5Lm.js";import{I as Le}from"./info-CqZ5EATZ.js";const De="AIzaSyCZn_Y7YkTDjJe8715PJ0jVbcwaim7kKFE",Tr={lat:54.352,lon:18.6466},Er=6e4,U=()=>{const n=new Date,d=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),m=String(n.getDate()).padStart(2,"0");return`${d}-${t}-${m}`},Cr=n=>n.trim(),Pr=(n,d)=>{const t=d/111320,m=d/(111320*Math.cos(n.lat*Math.PI/180));return{north:n.lat+t,south:n.lat-t,east:n.lon+m,west:n.lon-m}},Ar=40,C=(n,d)=>{if(!n||!d)return!1;const t=new Date(`${n}T${d}:00`);if(Number.isNaN(t.getTime()))return!1;const m=new Date(Date.now()+Ar*60*1e3);return t.getTime()<m.getTime()},q=n=>n?n<U():!1,re=(n,d)=>{const t=n.trim();if(/[A-Za-z]/.test(t))return d.phoneLetters;const m=t.replace(/\D/g,"");return m.length<7||m.length>15?d.phoneLength:null},te=(n,d)=>{const t=n.trim();return t?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)?null:d.email:d.emailRequired};function _r({route:n,onClose:d}){const{t,locale:m}=gr(),se=m==="pl"?"pl":"en",Be=hr(m),H=o.useMemo(()=>n.pickupTypeDefault?n.pickupTypeDefault:n.from===t.pricing.routes.airport?"airport":n.to===t.pricing.routes.airport?"address":"",[n.pickupTypeDefault,n.from,n.to,t.pricing.routes.airport]),[ae,Y]=o.useState(!1),K=o.useRef(null),B=o.useRef(null),[ne,S]=o.useState([]),[Ie,V]=o.useState(!1),[P,I]=o.useState("trip"),[oe,ie]=o.useState(!1),[r,j]=o.useState({pickupType:H,signService:"self",signText:"",flightNumber:"",flightUnknown:!1,passengers:"1",largeLuggage:"no",address:"",date:U(),time:"",name:"",phone:"",email:"",description:""});o.useEffect(()=>(wr(),()=>kr()),[]),o.useEffect(()=>{if(typeof window>"u")return;const a=window.setTimeout(()=>{j(s=>({...s,time:""})),xe(!1),X(!1)},0);return()=>window.clearTimeout(a)},[]),o.useEffect(()=>{if(typeof window>"u")return;if(window.google?.maps){Y(!0);return}const a=document.querySelector('script[data-google-maps="true"]');if(a){a.addEventListener("load",()=>Y(!0),{once:!0});return}const s=document.createElement("script");s.src=`https://maps.googleapis.com/maps/api/js?key=${encodeURIComponent(De)}&loading=async&v=weekly`,s.async=!0,s.defer=!0,s.dataset.googleMaps="true",s.addEventListener("load",()=>Y(!0)),document.head.appendChild(s)},[]);const le=async()=>{if(!ae)return null;const a=window.google;if(!a?.maps?.importLibrary)return null;if(K.current)return K.current;const s=await a.maps.importLibrary("places");return K.current=s,s},Re=async()=>{const a=await le();return a?(B.current||(B.current=new a.AutocompleteSessionToken),B.current):null},$e=()=>{B.current=null},Me=()=>{const a=re(r.phone,t.orderForm.validation);G(a)},[Oe,_e]=o.useState(!1),[z,qe]=o.useState(null),[de,Ue]=o.useState(null),[A,h]=o.useState(null),[ce,G]=o.useState(null),[J,W]=o.useState(null),[v,me]=o.useState(!1),[He,Ye]=o.useState(n.priceDay),[x,Ke]=o.useState({label:t.orderForm.rate.day,reason:t.orderForm.rate.reasonDay,price:n.priceDay}),[ue,Ve]=o.useState(null),R=o.useRef(null),Z=o.useRef(null),[pe,Q]=o.useState(null),[ge,ze]=o.useState(null),Ge=br(),$=o.useRef(!1),[he,Je]=o.useState(!1),[We,xe]=o.useState(!1),[fe,X]=o.useState(!1),be=r.pickupType==="airport"&&r.signService==="sign"?20:0,T=He+be,y=yr(T,Ge),ye=H?H==="airport":n.from===t.pricing.routes.airport,E=(r.pickupType==="airport"?!ye:r.pickupType==="address"?ye:!1)?{from:n.to,to:n.from,type:n.type}:{from:n.from,to:n.to,type:n.type},Ze=t.orderForm.signServiceTitle??"Airport pickup options",Qe=t.orderForm.signServiceSign??"Meet with a name sign",Xe=t.orderForm.signServiceFee??"+20 PLN added to final price",er=t.orderForm.signServiceSelf??"Find the driver yourself",rr=t.orderForm.signServiceSelfNote??"",M=!re(r.phone,t.orderForm.validation),O=!te(r.email,t.orderForm.validation),Ne=a=>{Ve(a),Z.current!==null&&(window.clearTimeout(Z.current),Z.current=null)},ee=()=>ue?e.jsx("div",{className:"mt-3 bg-gradient-to-br from-amber-50 to-orange-50 border-2 border-amber-300 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Le,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-amber-900",children:ue})]})}):null,w=P==="trip"?oe:he,je=w&&!r.pickupType,tr=w&&r.pickupType==="address"&&!r.address.trim(),sr=w&&r.pickupType==="airport"&&!r.flightUnknown&&!r.flightNumber.trim(),ar=w&&(!r.date||q(r.date)),ve=C(r.date,r.time),we=(P==="trip"?oe:he)||We,nr=we&&!fe&&(!r.time||ve),or=w&&!r.name.trim(),ir=w&&(!r.phone.trim()||!M),lr=w&&(!r.email.trim()||!O),k=(a,s)=>`${a}${s?" border-red-400 bg-red-50 focus:ring-red-200 focus:border-red-500":""}`,ke=o.useMemo(()=>{const a=!!r.date&&!q(r.date),s=!!r.time&&!C(r.date,r.time),l=!!r.pickupType,i=r.pickupType==="address"?!!r.address.trim():!0,g=r.pickupType==="airport"?r.flightUnknown?!0:!!r.flightNumber.trim():!0,u=!!r.name.trim(),b=!!r.phone.trim()&&M,f=!!r.email.trim()&&O;return[l,a,s,i,g,u,b,f].filter(L=>!L).length},[r.date,r.time,r.pickupType,r.address,r.flightUnknown,r.flightNumber,r.name,r.phone,r.email,M,O]),F=a=>{typeof window>"u"||window.requestAnimationFrame(()=>{const s=document.getElementById(a);s&&(s.scrollIntoView({behavior:"smooth",block:"center"}),s instanceof HTMLElement&&s.focus({preventScroll:!0}))})},dr=a=>{if(typeof window>"u"||!xr())return;const s=window.gtag;if(typeof s!="function"||!fr())return;const l={send_to:"AW-17948664296/MWNwCK_nz_cbEOjDy-5C"};a&&(l.transaction_id=a),s("event","conversion",l)};o.useEffect(()=>{if(r.pickupType!=="address"){S([]);return}const a=Cr(r.address);if(a.length<3){S([]);return}let s=!0;const l=window.setTimeout(async()=>{try{const i=await le();if(!i){S([]);return}const g=await Re(),u={input:a,region:"pl",language:m,locationBias:Pr(Tr,Er),sessionToken:g??void 0},{suggestions:b}=await i.AutocompleteSuggestion.fetchAutocompleteSuggestions(u),f=(Array.isArray(b)?b:[]).map(c=>c.placePrediction).filter(c=>c?.placeId).map(c=>({label:typeof c?.text?.text=="string"?c.text.text:c?.text?.toString?.()??"",placeId:String(c.placeId??"")})).filter(c=>c.label&&c.placeId);if(!s)return;S(f)}catch{if(!s)return;S([])}},350);return()=>{s=!1,window.clearTimeout(l)}},[r.address,r.pickupType,m,ae]),o.useEffect(()=>{if(typeof window>"u")return;const a=r.date?new Date(`${r.date}T00:00:00`).getFullYear():new Date().getFullYear();if(!Number.isFinite(a)||ge===a)return;ze(a);const s=`pl-holidays-${a}`,l=window.localStorage.getItem(s);if(l)try{const i=JSON.parse(l);if(Array.isArray(i)){Q(new Set(i));return}}catch{}fetch(`https://date.nager.at/api/v3/PublicHolidays/${a}/PL`).then(i=>i.ok?i.json():[]).then(i=>{const g=Array.isArray(i)?i.map(u=>u.date).filter(u=>!!u):[];Q(new Set(g)),window.localStorage.setItem(s,JSON.stringify(g))}).catch(()=>{Q(null)})},[r.date,ge]),o.useEffect(()=>{let a=!1;const s=[];if(r.time){const[i,g]=r.time.split(":").map(Number),u=i*60+g+30,b=Math.floor(u/60)%24,f=b>=22||b<6;f&&s.push(t.orderForm.rate.reasonLate),a=a||f}if(r.date){const i=new Date(`${r.date}T00:00:00`);!Number.isNaN(i.getTime())&&Fr(i,pe)&&(s.push(t.orderForm.rate.reasonHoliday),a=!0)}const l=a?n.priceNight:n.priceDay;Ye(l),Ke({label:a?t.orderForm.rate.night:t.orderForm.rate.day,reason:s.length?s.join(" + "):t.orderForm.rate.reasonDay,price:l})},[r.time,r.date,pe,n.priceDay,n.priceNight,t]),o.useEffect(()=>{if(!(!r.time&&!r.date)){if(R.current===null){R.current=x.price,Ne(t.orderForm.rate.banner(x.label,x.price,x.reason));return}R.current!==x.price&&(R.current=x.price,Ne(t.orderForm.rate.banner(x.label,x.price,x.reason)))}},[x.price,x.label,x.reason,r.time,r.date,t]);const cr=async a=>{a.preventDefault(),h(null),G(null),W(null),Je(!0);const s=[];if(r.date||s.push("date"),r.date&&q(r.date)){D("order",1,"date"),N("order","validation_error"),h(t.orderForm.validation.datePast),F("date");return}if(r.time||s.push("time"),r.pickupType||s.push("pickupType"),r.pickupType==="airport"&&!r.flightUnknown&&!r.flightNumber.trim()&&s.push("flightNumber"),r.pickupType==="address"&&!r.address.trim()&&s.push("address"),r.name.trim()||s.push("name"),(!r.phone.trim()||!M)&&s.push("phone"),(!r.email.trim()||!O)&&s.push("email"),s.length>0){D("order",s.length,s[0]),N("order","validation_error"),F(s[0]);return}if(C(r.date,r.time)){D("order",1,"time"),N("order","validation_error"),h(t.orderForm.validation.timeSoon),F("time");return}const l=re(r.phone,t.orderForm.validation);if(l){D("order",1,"phone"),N("order","validation_error"),G(l),h(l);return}const i=te(r.email,t.orderForm.validation);if(i){D("order",1,"email"),N("order","validation_error"),W(i),h(i);return}me(!0);const g=Nr(),u=vr({pickupType:r.pickupType,signService:r.pickupType==="airport"?r.signService:"self",signFee:be,signText:r.signText,passengers:r.passengers,largeLuggage:r.largeLuggage,route:{from:E.from,to:E.to,type:E.type},notes:r.description.trim()}),b={carType:n.type==="bus"?1:2,pickupAddress:r.pickupType==="address"?r.address:E.from,proposedPrice:String(T),date:r.date,pickupTime:r.time,flightNumber:r.pickupType==="airport"?r.flightUnknown?"TBD":r.flightNumber:"N/A",fullName:r.name,emailAddress:r.email,phoneNumber:r.phone,additionalNotes:u,locale:se};try{const f=await fetch(`${g}/api/orders`,{method:"POST",headers:{"Content-Type":"application/json","Accept-Language":se},body:JSON.stringify(b)}),c=await f.json().catch(()=>null);if(!f.ok){N("order","error","api");const pr=c?.error??t.orderForm.submitError;h(pr);return}const L=c?.id??null;qe(L),Ue(c?.generatedId??null),_e(!0),N("order","success"),dr(L)}catch{N("order","error","network"),h(t.orderForm.submitNetworkError)}finally{me(!1)}},mr=a=>{const s=te(a,t.orderForm.validation);W(s),!s&&A===J&&h(null)},p=a=>{$.current||($.current=!0,Ee("order"));const{name:s,value:l}=a.target,i=U();if(s==="pickupType"&&(I("trip"),ie(!1)),s==="date"&&l<i){j({...r,[s]:i});return}if(s==="date"){const g=l<i?i:l,u=r.time;A===t.orderForm.validation.timeSoon&&(C(g,u)||h(null)),j({...r,date:g,time:u});return}s==="time"&&A===t.orderForm.validation.timeSoon&&h(null),j({...r,[s]:l})},Fe=a=>{$.current||($.current=!0,Ee("order")),j(s=>({...s,signService:a,signText:a==="self"?"":s.signText}))},_=o.useRef(null),ur=()=>{if(ie(!0),!r.pickupType){F("pickupType");return}if(!r.date||q(r.date)){F("date");return}if(!r.time){F("time");return}if(C(r.date,r.time)){h(t.orderForm.validation.timeSoon),F("time");return}I("details"),window.requestAnimationFrame(()=>{_.current?.scrollTo({top:0,behavior:"smooth"})})};return Oe?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-xl max-w-md w-full p-8 relative",children:e.jsxs("div",{className:"bg-green-50 border-2 border-green-500 rounded-xl p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h3",{className:"text-green-900 mb-2",children:t.orderForm.submittedTitle}),e.jsx("p",{className:"text-green-800 mb-4",children:t.orderForm.submittedBody}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-green-700 mb-4",children:[e.jsx("span",{className:"inline-flex h-2.5 w-2.5 rounded-full bg-green-500 animate-pulse"}),e.jsx("span",{className:"text-sm",children:t.orderForm.awaiting})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 mb-2",children:[e.jsxs("p",{className:"text-gray-700",children:[t.orderForm.totalPrice," ",e.jsxs("span",{className:"font-bold text-blue-600",children:[T," PLN"]})]}),y&&e.jsx("div",{className:"mt-1 text-gray-500",children:e.jsx("span",{className:"eur-text",children:y})})]}),ee(),z&&e.jsxs("div",{className:"bg-white rounded-lg p-4 mb-4",children:[de&&e.jsxs("p",{className:"text-gray-700",children:[t.orderForm.orderNumber," ",e.jsx("span",{className:"font-semibold",children:de})]}),e.jsxs("p",{className:"text-gray-700",children:[t.orderForm.orderId," ",e.jsx("span",{className:"font-semibold",children:z})]}),e.jsx("a",{href:`${Be}/?orderId=${z}`,className:"text-blue-600 hover:text-blue-700 text-sm underline",children:t.orderForm.manageLink})]}),e.jsx("button",{onClick:()=>{Se("order"),d()},className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors",children:t.common.close})]})})}):e.jsx("div",{className:"modal-overlay fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-hidden",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full my-8 max-h-[90vh] flex flex-col relative",children:[e.jsxs("div",{className:"p-6 border-b flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-gray-900",children:t.orderForm.title}),e.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:[E.from," â†” ",E.to]}),ke>0&&e.jsx("p",{className:"text-[11px] text-gray-600 mt-3",children:t.common.remainingFields(ke)})]}),e.jsx("button",{onClick:()=>{Se("order"),d()},className:"text-gray-400 hover:text-gray-600 flex-shrink-0 ml-4",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:cr,autoComplete:"off",noValidate:!0,className:"booking-form flex-1 flex flex-col overflow-hidden cursor-default",children:[e.jsxs("div",{ref:_,className:`modal-scroll p-6 space-y-6 overflow-y-auto ${P==="details"?"order-form--details":""}`,children:[A&&e.jsx("div",{className:"bg-red-50 border-2 border-red-500 rounded-lg p-4 text-red-800",children:A}),P==="trip"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{id:"pickupType",tabIndex:-1,children:[e.jsx("label",{className:"block text-gray-700 mb-2",children:t.orderForm.pickupType}),e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:t.orderForm.pickupTypeHint}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("label",{className:`flex items-start gap-3 p-4 border-2 rounded-lg cursor-pointer transition-all ${r.pickupType==="airport"?"border-blue-500 bg-blue-50":je?"border-red-400 ring-1 ring-red-200":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("input",{type:"radio",name:"pickupType",value:"airport",checked:r.pickupType==="airport",onChange:p,className:"w-4 h-4 text-blue-600"}),e.jsx(Ce,{className:"w-5 h-5 text-gray-700"}),e.jsx("span",{className:"text-sm leading-snug",children:t.orderForm.airportPickup})]}),e.jsxs("label",{className:`flex items-start gap-3 p-4 border-2 rounded-lg cursor-pointer transition-all ${r.pickupType==="address"?"border-blue-500 bg-blue-50":je?"border-red-400 ring-1 ring-red-200":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("input",{type:"radio",name:"pickupType",value:"address",checked:r.pickupType==="address",onChange:p,className:"w-4 h-4 text-blue-600"}),e.jsx(Te,{className:"w-5 h-5 text-gray-700"}),e.jsx("span",{className:"text-sm leading-snug",children:t.orderForm.addressPickup})]})]})]}),r.pickupType&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-700",children:t.orderForm.totalPrice}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:"text-blue-900 text-2xl",children:[T," PLN"]}),y&&e.jsx("div",{className:"text-gray-500",children:e.jsx("span",{className:"eur-text",children:y})})]})]})}),ee(),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"date",className:"block text-gray-700 mb-2",children:[e.jsx(Sr,{className:"w-4 h-4 inline mr-2"}),t.orderForm.date]}),e.jsx("input",{type:"date",id:"date",name:"date",value:r.date,onChange:p,min:U(),className:k("w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",ar),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"time",className:"block text-gray-700 mb-2",children:t.orderForm.pickupTime}),e.jsx("input",{type:"time",id:"time",name:"time",value:r.time,autoComplete:"off",onChange:p,onFocus:()=>X(!0),onBlur:a=>{X(!1),xe(!0),a.currentTarget.value&&C(r.date,a.currentTarget.value)&&h(t.orderForm.validation.timeSoon)},className:k("w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",nr),required:!0}),!fe&&we&&r.time&&ve&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.orderForm.validation.timeSoon})]})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("button",{type:"button",onClick:()=>{I("trip"),window.requestAnimationFrame(()=>{_.current?.scrollTo({top:0,behavior:"smooth"})})},className:"rounded-lg bg-blue-600 px-4 py-2 text-sm font-semibold text-white transition-colors hover:bg-blue-700",children:t.common.back})}),e.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-700",children:t.orderForm.totalPrice}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:"text-blue-900 text-2xl",children:[T," PLN"]}),y&&e.jsx("div",{className:"text-gray-500",children:e.jsx("span",{className:"eur-text",children:y})})]})]})}),ee(),r.pickupType==="airport"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{id:"signService",tabIndex:-1,children:[e.jsx("label",{className:"block text-gray-700 mb-2",children:Ze}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsxs("label",{className:`flex items-center gap-3 p-4 border-2 rounded-lg cursor-pointer transition-all ${r.signService==="sign"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("input",{type:"radio",name:"signService",value:"sign",checked:r.signService==="sign",onChange:()=>Fe("sign"),className:"w-4 h-4 text-blue-600"}),e.jsx(Pe,{className:"w-5 h-5 text-gray-700"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-900",children:Qe}),e.jsx("div",{className:"text-xs text-gray-500",children:Xe})]})]}),e.jsxs("label",{className:`flex items-center gap-3 p-4 border-2 rounded-lg cursor-pointer transition-all ${r.signService==="self"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("input",{type:"radio",name:"signService",value:"self",checked:r.signService==="self",onChange:()=>Fe("self"),className:"w-4 h-4 text-blue-600"}),e.jsx(Ae,{className:"w-5 h-5 text-gray-700 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-900",children:er}),e.jsx("div",{className:"text-xs text-gray-500",children:rr})]})]})]})]}),r.signService==="sign"?e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"signText",className:"block text-gray-700 mb-2",children:[e.jsx(Pe,{className:"w-4 h-4 inline mr-2"}),t.orderForm.signText]}),e.jsx("input",{type:"text",id:"signText",name:"signText",value:r.signText,onChange:p,placeholder:t.orderForm.signPlaceholder,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsxs("div",{className:"mt-3 bg-gradient-to-br from-amber-50 to-orange-50 border-2 border-amber-300 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx(Le,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-amber-900",children:t.orderForm.signHelp})]}),e.jsxs("div",{className:"bg-white border-2 border-gray-300 rounded-lg p-4 shadow-sm",children:[e.jsx("p",{className:"text-[8px] text-gray-500 mb-2 text-center",children:t.orderForm.signPreview}),e.jsx("div",{className:"bg-white border-4 border-blue-900 rounded p-3 text-center min-h-[60px] flex items-center justify-center",children:e.jsx("p",{className:"text-blue-900 text-lg break-words",children:r.signText||r.name||t.orderForm.signEmpty})})]})]})]}):null,e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"flightNumber",className:"block text-gray-700 mb-2",children:[e.jsx(Ce,{className:"w-4 h-4 inline mr-2"}),t.orderForm.flightNumber]}),e.jsx("input",{type:"text",id:"flightNumber",name:"flightNumber",value:r.flightNumber,onChange:p,placeholder:t.orderForm.flightPlaceholder,className:k("w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",sr),disabled:r.flightUnknown,autoComplete:"off"}),e.jsxs("label",{className:"mt-2 flex items-center gap-2 text-sm text-gray-600",children:[e.jsx("input",{type:"checkbox",checked:r.flightUnknown,onChange:a=>{const s=a.target.checked;j(l=>({...l,flightUnknown:s,flightNumber:s?"":l.flightNumber}))}}),t.orderForm.flightUnknown]})]})]}),r.pickupType==="address"&&e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"address",className:"block text-gray-700 mb-2",children:[e.jsx(Te,{className:"w-4 h-4 inline mr-2"}),t.orderForm.pickupAddress]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",id:"address",name:"address",value:r.address,onChange:p,onFocus:()=>V(!0),onBlur:()=>{window.setTimeout(()=>V(!1),150)},placeholder:t.orderForm.pickupPlaceholder,autoComplete:"street-address",className:k("w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",tr),required:!0}),Ie&&ne.length>0&&e.jsx("div",{className:"absolute z-50 mt-2 w-full rounded-xl border border-slate-200 bg-white shadow-lg overflow-hidden",children:ne.slice(0,6).map(a=>e.jsx("button",{type:"button",className:"block w-full px-4 py-3 text-left text-sm text-slate-800 hover:bg-slate-50 focus:outline-none focus:bg-slate-50",onMouseDown:s=>{s.preventDefault(),j(l=>({...l,address:a.label})),S([]),V(!1),$e()},children:a.label},a.placeId))})]})]}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"passengers",className:"block text-gray-700 mb-2",children:[e.jsx(Ae,{className:"w-4 h-4 inline mr-2"}),t.orderForm.passengers]}),e.jsx("select",{id:"passengers",name:"passengers",value:r.passengers,onChange:p,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:n.type==="bus"?e.jsx(e.Fragment,{children:t.orderForm.passengersBus.map((a,s)=>e.jsx("option",{value:5+s,children:a},a))}):e.jsx(e.Fragment,{children:t.orderForm.passengersStandard.map((a,s)=>e.jsx("option",{value:1+s,children:a},a))})})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"largeLuggage",className:"block text-gray-700 mb-2",children:[e.jsx(jr,{className:"w-4 h-4 inline mr-2"}),t.orderForm.largeLuggage]}),e.jsxs("select",{id:"largeLuggage",name:"largeLuggage",value:r.largeLuggage,onChange:p,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"no",children:t.orderForm.luggageNo}),e.jsx("option",{value:"yes",children:t.orderForm.luggageYes})]})]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h4",{className:"text-gray-900 mb-4",children:t.orderForm.contactTitle}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-gray-700 mb-2",children:t.orderForm.fullName}),e.jsx("input",{type:"text",id:"name",name:"name",value:r.name,onChange:p,placeholder:t.orderForm.namePlaceholder,autoComplete:"name",className:k("w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",or),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-gray-700 mb-2",children:t.orderForm.phoneNumber}),e.jsx("input",{type:"tel",id:"phone",name:"phone",value:r.phone,onChange:p,onBlur:Me,inputMode:"tel",autoComplete:"tel",placeholder:"+48 123 456 789",className:k("w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",ir),required:!0}),ce&&e.jsx("p",{className:"text-sm text-red-600 mt-2",children:ce})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-gray-700 mb-2",children:t.orderForm.email}),e.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:a=>{p(a),mr(a.target.value)},placeholder:t.orderForm.emailPlaceholder,autoComplete:"email",className:k("w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",lr),required:!0}),J&&e.jsx("p",{className:"text-sm text-red-600 mt-2",children:J}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:t.orderForm.emailHelp})]}),e.jsxs("details",{className:"rounded-lg border border-gray-200 bg-gray-50 p-4",children:[e.jsx("summary",{className:"cursor-pointer text-sm font-semibold text-gray-800",children:t.orderForm.notesTitle}),e.jsxs("div",{className:"mt-3",children:[e.jsx("textarea",{id:"description",name:"description",value:r.description,onChange:p,placeholder:t.orderForm.notesPlaceholder,rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:t.orderForm.notesHelp})]})]})]})]})]})]}),e.jsx("div",{className:"order-actions-footer",children:P==="trip"?e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:ur,className:`order-actions-btn w-full py-4 rounded-lg transition-colors ${v?"bg-slate-200 text-slate-700 border border-slate-300 shadow-inner cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,disabled:v,style:{minHeight:"56px"},children:t.common.continue}),e.jsx("p",{className:"text-xs text-center text-gray-500 mt-2",children:t.orderForm.reassurance})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"order-actions-grid grid grid-cols-2 gap-2 sm:gap-3",children:[e.jsx("button",{type:"button",onClick:()=>{I("trip"),window.requestAnimationFrame(()=>{_.current?.scrollTo({top:0,behavior:"smooth"})})},className:`order-actions-btn w-full py-4 rounded-lg transition-colors ${v?"bg-slate-200 text-slate-700 border border-slate-300 shadow-inner cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,disabled:v,style:{minHeight:"56px"},children:t.common.back}),e.jsx("button",{type:"submit",className:`order-actions-btn w-full py-4 rounded-lg transition-colors ${v?"bg-slate-200 text-slate-700 border border-slate-300 shadow-inner cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,disabled:v,style:{minHeight:"56px"},children:v?t.orderForm.submitting:e.jsxs("span",{className:"flex flex-col items-center gap-1",children:[e.jsx("span",{children:t.orderForm.confirmOrder(T)}),y&&e.jsx("span",{className:"order-actions-eur text-[11px] text-blue-100",children:y})]})})]}),e.jsx("p",{className:"text-xs text-center text-gray-500 mt-2",children:t.orderForm.reassurance})]})})]})]})})}export{_r as OrderForm};
