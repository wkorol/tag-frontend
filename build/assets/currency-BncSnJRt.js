import{r as f}from"./index-D5s9v3V6.js";const m=()=>{const n="https://taxiairportgdansk.com";return n.trim()!==""?n:(console.warn("VITE_API_BASE_URL is not set; API calls will fail."),"")},i=1e3*60*60*6,h="eur-rate-cache";let a=null,c=0,o=null;const w=()=>a&&Date.now()-c<i?null:(o||(o=p().finally(()=>{o=null})),o),y=()=>{w()};async function p(){try{const n=m(),r=await fetch(`${n}/api/eur-rate`);if(!r.ok)return null;const e=await r.json(),t=typeof(e==null?void 0:e.rate)=="number"?e.rate:null;if(t&&(a=t,c=Date.now(),typeof window!="undefined"))try{localStorage.setItem(h,JSON.stringify({rate:t,at:c}))}catch{}return t}catch{return null}}function g(){const[n,r]=f.useState(()=>{if(a&&Date.now()-c<i)return a;if(typeof window!="undefined")try{const e=localStorage.getItem(h);if(e){const t=JSON.parse(e);if(t!=null&&t.rate&&(t!=null&&t.at)&&Date.now()-t.at<i)return a=t.rate,c=t.at,t.rate}}catch{}return null});return f.useEffect(()=>{if(a&&Date.now()-c<i)return;let e=!1;const t=u=>{u.then(l=>{!e&&l&&r(l)}).catch(()=>null)},s=()=>{const u=w();u&&t(u)};o?t(o):s();const d=window.setTimeout(()=>{!e&&!a&&s()},1500);return()=>{e=!0,window.clearTimeout(d)}},[]),n}function R(n,r){return!r||!Number.isFinite(n)?null:`~${Math.round(n*r)}EUR`}export{R as f,m as g,y as p,g as u};
