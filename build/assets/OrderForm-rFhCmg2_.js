import{u as Er,r as o,j as e,l as Cr,x as Oe,U as _e,I as Ue,y as I,z as v,A as qe,B as Pr,D as Ar}from"./index-r4Ouve-b.js";import{u as Lr,f as Dr}from"./currency-DraHQOHZ.js";import{P as He,F as Ye,L as $r,b as Rr}from"./orderNotes-Bles9CdL.js";import{g as Br}from"./api-KPPBra2D.js";import{l as Ir,u as Mr,i as Or}from"./scrollLock-ClQUr7nv.js";import{M as ze}from"./map-pin-B_q14Z6d.js";import{C as _r}from"./calendar-CczjUTcr.js";const Ve="AIzaSyCZn_Y7YkTDjJe8715PJ0jVbcwaim7kKFE",Ur={lat:54.352,lon:18.6466},qr=6e4,K=()=>{const n=new Date,c=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),m=String(n.getDate()).padStart(2,"0");return`${c}-${t}-${m}`},Hr=n=>n.trim(),Yr=(n,c)=>{const t=c/111320,m=c/(111320*Math.cos(n.lat*Math.PI/180));return{north:n.lat+t,south:n.lat-t,east:n.lon+m,west:n.lon-m}},zr=40,L=(n,c)=>{if(!n||!c)return!1;const t=new Date(`${n}T${c}:00`);if(Number.isNaN(t.getTime()))return!1;const m=new Date(Date.now()+zr*60*1e3);return t.getTime()<m.getTime()},V=n=>n?n<K():!1,oe=(n,c)=>{const t=n.trim();if(/[A-Za-z]/.test(t))return c.phoneLetters;const m=t.replace(/\D/g,"");return m.length<7||m.length>15?c.phoneLength:null},ie=(n,c)=>{const t=n.trim();return t?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)?null:c.email:c.emailRequired};function et({route:n,onClose:c}){var Ae,Le,De,$e,Re,Be,Ie;const{t,locale:m}=Er(),le=m==="pl"?"pl":"en",Ke=Cr(m),G=o.useMemo(()=>n.pickupTypeDefault?n.pickupTypeDefault:n.from===t.pricing.routes.airport?"airport":n.to===t.pricing.routes.airport?"address":"",[n.pickupTypeDefault,n.from,n.to,t.pricing.routes.airport]),[de,J]=o.useState(!1),W=o.useRef(null),M=o.useRef(null),[ce,C]=o.useState([]),[Ge,Z]=o.useState(!1),[D,O]=o.useState("trip"),[me,ue]=o.useState(!1),[r,w]=o.useState({pickupType:G,signService:"self",signText:"",flightNumber:"",flightUnknown:!1,passengers:"1",largeLuggage:"no",address:"",date:K(),time:"",name:"",phone:"",email:"",description:""});o.useEffect(()=>(Ir(),()=>Mr()),[]),o.useEffect(()=>{if(typeof window=="undefined")return;const s=window.setTimeout(()=>{w(a=>({...a,time:""})),je(!1),ae(!1)},0);return()=>window.clearTimeout(s)},[]),o.useEffect(()=>{var i;if(typeof window=="undefined")return;if((i=window.google)!=null&&i.maps){J(!0);return}const s=document.querySelector('script[data-google-maps="true"]');if(s){s.addEventListener("load",()=>J(!0),{once:!0});return}const a=document.createElement("script");a.src=`https://maps.googleapis.com/maps/api/js?key=${encodeURIComponent(Ve)}&loading=async&v=weekly`,a.async=!0,a.defer=!0,a.dataset.googleMaps="true",a.addEventListener("load",()=>J(!0)),document.head.appendChild(a)},[]);const pe=async()=>{var i;if(!de)return null;const s=window.google;if(!((i=s==null?void 0:s.maps)!=null&&i.importLibrary))return null;if(W.current)return W.current;const a=await s.maps.importLibrary("places");return W.current=a,a},Je=async()=>{const s=await pe();return s?(M.current||(M.current=new s.AutocompleteSessionToken),M.current):null},We=()=>{M.current=null},Ze=()=>{const s=oe(r.phone,t.orderForm.validation);X(s)},[Qe,Xe]=o.useState(!1),[Q,er]=o.useState(null),[ge,rr]=o.useState(null),[$,x]=o.useState(null),[he,X]=o.useState(null),[ee,re]=o.useState(null),[k,xe]=o.useState(!1),[tr,sr]=o.useState(n.priceDay),[f,ar]=o.useState({label:t.orderForm.rate.day,reason:t.orderForm.rate.reasonDay,price:n.priceDay}),[fe,nr]=o.useState(null),_=o.useRef(null),te=o.useRef(null),[be,se]=o.useState(null),[ye,or]=o.useState(null),ir=Lr(),U=o.useRef(!1),[Ne,lr]=o.useState(!1),[dr,je]=o.useState(!1),[ve,ae]=o.useState(!1),we=r.pickupType==="airport"&&r.signService==="sign"?20:0,F=tr+we,j=Dr(F,ir),cr=typeof t.orderForm.confirmOrder=="function"?t.orderForm.confirmOrder(F):`${(Ae=t.orderForm.confirmOrder)!=null?Ae:"Confirm order"} (${F} PLN)`,ke=G?G==="airport":n.from===t.pricing.routes.airport,P=(r.pickupType==="airport"?!ke:r.pickupType==="address"?ke:!1)?{from:n.to,to:n.from,type:n.type}:{from:n.from,to:n.to,type:n.type},mr=(Le=t.orderForm.signServiceTitle)!=null?Le:"Airport pickup options",ur=(De=t.orderForm.signServiceSign)!=null?De:"Meet with a name sign",pr=($e=t.orderForm.signServiceFee)!=null?$e:"+20 PLN added to final price",gr=(Re=t.orderForm.signServiceSelf)!=null?Re:"Find the driver yourself",hr=(Be=t.orderForm.signServiceSelfNote)!=null?Be:"",q=!oe(r.phone,t.orderForm.validation),H=!ie(r.email,t.orderForm.validation),Fe=s=>{nr(s),te.current!==null&&(window.clearTimeout(te.current),te.current=null)},Se=(s,a,i)=>{var l;return typeof((l=t.orderForm.rate)==null?void 0:l.banner)=="function"?t.orderForm.rate.banner(s,a,i):`${s}: ${a} PLN (${i})`},ne=()=>fe?e.jsx("div",{className:"mt-3 bg-gradient-to-br from-amber-50 to-orange-50 border-2 border-amber-300 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ue,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-amber-900",children:fe})]})}):null,S=D==="trip"?me:Ne,Te=S&&!r.pickupType,xr=S&&r.pickupType==="address"&&!r.address.trim(),fr=S&&r.pickupType==="airport"&&!r.flightUnknown&&!r.flightNumber.trim(),br=S&&(!r.date||V(r.date)),Ee=L(r.date,r.time),Ce=(D==="trip"?me:Ne)||dr,yr=Ce&&!ve&&(!r.time||Ee),Nr=S&&!r.name.trim(),jr=S&&(!r.phone.trim()||!q),vr=S&&(!r.email.trim()||!H),T=(s,a)=>`${s}${a?" border-red-400 bg-red-50 focus:ring-red-200 focus:border-red-500":""}`,b=o.useMemo(()=>{const s=!!r.date&&!V(r.date),a=!!r.time&&!L(r.date,r.time),i=!!r.pickupType,l=r.pickupType==="address"?!!r.address.trim():!0,u=r.pickupType==="airport"?r.flightUnknown?!0:!!r.flightNumber.trim():!0,p=!!r.name.trim(),y=!!r.phone.trim()&&q,N=!!r.email.trim()&&H;return[i,s,a,l,u,p,y,N].filter(R=>!R).length},[r.date,r.time,r.pickupType,r.address,r.flightUnknown,r.flightNumber,r.name,r.phone,r.email,q,H]),wr=typeof t.common.remainingFields=="function"?t.common.remainingFields(b):(Ie={pl:`Pozostało pól: ${b}`,de:`Verbleibende Felder: ${b}`,fi:`Jäljellä olevat kentät: ${b}`,no:`Gjenstående felt: ${b}`,sv:`Återstående fält: ${b}`,da:`Resterende felter: ${b}`,en:`Remaining fields: ${b}`}[m])!=null?Ie:`Remaining fields: ${b}`,E=s=>{typeof window!="undefined"&&window.requestAnimationFrame(()=>{const a=document.getElementById(s);a&&(a.scrollIntoView({behavior:"smooth",block:"center"}),a instanceof HTMLElement&&a.focus({preventScroll:!0}))})},kr=s=>{if(typeof window=="undefined"||!Pr())return;const a=window.gtag;if(typeof a!="function"||!Ar())return;const i={send_to:"AW-17948664296/MWNwCK_nz_cbEOjDy-5C"};s&&(i.transaction_id=s),a("event","conversion",i)};o.useEffect(()=>{if(r.pickupType!=="address"){C([]);return}const s=Hr(r.address);if(s.length<3){C([]);return}let a=!0;const i=window.setTimeout(async()=>{try{const l=await pe();if(!l){C([]);return}const u=await Je(),p={input:s,region:"pl",language:m,locationBias:Yr(Ur,qr),sessionToken:u!=null?u:void 0},{suggestions:y}=await l.AutocompleteSuggestion.fetchAutocompleteSuggestions(p),N=(Array.isArray(y)?y:[]).map(d=>d.placePrediction).filter(d=>d==null?void 0:d.placeId).map(d=>{var A,g,B,z,Me;return{label:typeof((A=d==null?void 0:d.text)==null?void 0:A.text)=="string"?d.text.text:(z=(B=(g=d==null?void 0:d.text)==null?void 0:g.toString)==null?void 0:B.call(g))!=null?z:"",placeId:String((Me=d.placeId)!=null?Me:"")}}).filter(d=>d.label&&d.placeId);if(!a)return;C(N)}catch{if(!a)return;C([])}},350);return()=>{a=!1,window.clearTimeout(i)}},[r.address,r.pickupType,m,de]),o.useEffect(()=>{if(typeof window=="undefined")return;const s=r.date?new Date(`${r.date}T00:00:00`).getFullYear():new Date().getFullYear();if(!Number.isFinite(s)||ye===s)return;or(s);const a=`pl-holidays-${s}`,i=window.localStorage.getItem(a);if(i)try{const l=JSON.parse(i);if(Array.isArray(l)){se(new Set(l));return}}catch{}fetch(`https://date.nager.at/api/v3/PublicHolidays/${s}/PL`).then(l=>l.ok?l.json():[]).then(l=>{const u=Array.isArray(l)?l.map(p=>p.date).filter(p=>!!p):[];se(new Set(u)),window.localStorage.setItem(a,JSON.stringify(u))}).catch(()=>{se(null)})},[r.date,ye]),o.useEffect(()=>{let s=!1;const a=[];if(r.time){const[l,u]=r.time.split(":").map(Number),p=l*60+u+30,y=Math.floor(p/60)%24,N=y>=22||y<6;N&&a.push(t.orderForm.rate.reasonLate),s=s||N}if(r.date){const l=new Date(`${r.date}T00:00:00`);!Number.isNaN(l.getTime())&&Or(l,be)&&(a.push(t.orderForm.rate.reasonHoliday),s=!0)}const i=s?n.priceNight:n.priceDay;sr(i),ar({label:s?t.orderForm.rate.night:t.orderForm.rate.day,reason:a.length?a.join(" + "):t.orderForm.rate.reasonDay,price:i})},[r.time,r.date,be,n.priceDay,n.priceNight,t]),o.useEffect(()=>{if(!(!r.time&&!r.date)){if(_.current===null){_.current=f.price,Fe(Se(f.label,f.price,f.reason));return}_.current!==f.price&&(_.current=f.price,Fe(Se(f.label,f.price,f.reason)))}},[f.price,f.label,f.reason,r.time,r.date,t]);const Fr=async s=>{var N,d,R;s.preventDefault(),x(null),X(null),re(null),lr(!0);const a=[];if(r.date||a.push("date"),r.date&&V(r.date)){I("order",1,"date"),v("order","validation_error"),x(t.orderForm.validation.datePast),E("date");return}if(r.time||a.push("time"),r.pickupType||a.push("pickupType"),r.pickupType==="airport"&&!r.flightUnknown&&!r.flightNumber.trim()&&a.push("flightNumber"),r.pickupType==="address"&&!r.address.trim()&&a.push("address"),r.name.trim()||a.push("name"),(!r.phone.trim()||!q)&&a.push("phone"),(!r.email.trim()||!H)&&a.push("email"),a.length>0){I("order",a.length,a[0]),v("order","validation_error"),E(a[0]);return}if(L(r.date,r.time)){I("order",1,"time"),v("order","validation_error"),x(t.orderForm.validation.timeSoon),E("time");return}const i=oe(r.phone,t.orderForm.validation);if(i){I("order",1,"phone"),v("order","validation_error"),X(i),x(i);return}const l=ie(r.email,t.orderForm.validation);if(l){I("order",1,"email"),v("order","validation_error"),re(l),x(l);return}xe(!0);const u=Br(),p=Rr({pickupType:r.pickupType,signService:r.pickupType==="airport"?r.signService:"self",signFee:we,signText:r.signText,passengers:r.passengers,largeLuggage:r.largeLuggage,route:{from:P.from,to:P.to,type:P.type},notes:r.description.trim()}),y={carType:n.type==="bus"?1:2,pickupAddress:r.pickupType==="address"?r.address:P.from,proposedPrice:String(F),date:r.date,pickupTime:r.time,flightNumber:r.pickupType==="airport"?r.flightUnknown?"TBD":r.flightNumber:"N/A",fullName:r.name,emailAddress:r.email,phoneNumber:r.phone,additionalNotes:p,locale:le};try{const A=await fetch(`${u}/api/orders`,{method:"POST",headers:{"Content-Type":"application/json","Accept-Language":le},body:JSON.stringify(y)}),g=await A.json().catch(()=>null);if(!A.ok){v("order","error","api");const z=(N=g==null?void 0:g.error)!=null?N:t.orderForm.submitError;x(z);return}const B=(d=g==null?void 0:g.id)!=null?d:null;er(B),rr((R=g==null?void 0:g.generatedId)!=null?R:null),Xe(!0),v("order","success"),kr(B)}catch{v("order","error","network"),x(t.orderForm.submitNetworkError)}finally{xe(!1)}},Sr=s=>{const a=ie(s,t.orderForm.validation);re(a),!a&&$===ee&&x(null)},h=s=>{U.current||(U.current=!0,qe("order"));const{name:a,value:i}=s.target,l=K();if(a==="pickupType"&&(O("trip"),ue(!1)),a==="date"&&i<l){w({...r,[a]:l});return}if(a==="date"){const u=i<l?l:i,p=r.time;$===t.orderForm.validation.timeSoon&&(L(u,p)||x(null)),w({...r,date:u,time:p});return}a==="time"&&$===t.orderForm.validation.timeSoon&&x(null),w({...r,[a]:i})},Pe=s=>{U.current||(U.current=!0,qe("order")),w(a=>({...a,signService:s,signText:s==="self"?"":a.signText}))},Y=o.useRef(null),Tr=()=>{if(ue(!0),!r.pickupType){E("pickupType");return}if(!r.date||V(r.date)){E("date");return}if(!r.time){E("time");return}if(L(r.date,r.time)){x(t.orderForm.validation.timeSoon),E("time");return}O("details"),window.requestAnimationFrame(()=>{var s;(s=Y.current)==null||s.scrollTo({top:0,behavior:"smooth"})})};return Qe?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-xl max-w-md w-full p-8 relative",children:e.jsxs("div",{className:"bg-green-50 border-2 border-green-500 rounded-xl p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h3",{className:"text-green-900 mb-2",children:t.orderForm.submittedTitle}),e.jsx("p",{className:"text-green-800 mb-4",children:t.orderForm.submittedBody}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-green-700 mb-4",children:[e.jsx("span",{className:"inline-flex h-2.5 w-2.5 rounded-full bg-green-500 animate-pulse"}),e.jsx("span",{className:"text-sm",children:t.orderForm.awaiting})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 mb-2",children:[e.jsxs("p",{className:"text-gray-700",children:[t.orderForm.totalPrice," ",e.jsxs("span",{className:"font-bold text-blue-600",children:[F," PLN"]})]}),j&&e.jsx("div",{className:"mt-1 text-gray-500",children:e.jsx("span",{className:"eur-text",children:j})})]}),ne(),Q&&e.jsxs("div",{className:"bg-white rounded-lg p-4 mb-4",children:[ge&&e.jsxs("p",{className:"text-gray-700",children:[t.orderForm.orderNumber," ",e.jsx("span",{className:"font-semibold",children:ge})]}),e.jsxs("p",{className:"text-gray-700",children:[t.orderForm.orderId," ",e.jsx("span",{className:"font-semibold",children:Q})]}),e.jsx("a",{href:`${Ke}/?orderId=${Q}`,className:"text-blue-600 hover:text-blue-700 text-sm underline",children:t.orderForm.manageLink})]}),e.jsx("button",{onClick:()=>{Oe("order"),c()},className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors",children:t.common.close})]})})}):e.jsx("div",{className:"modal-overlay fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-hidden",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full my-8 max-h-[90vh] flex flex-col relative",children:[e.jsxs("div",{className:"p-6 border-b flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-gray-900",children:t.orderForm.title}),e.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:[P.from," ↔ ",P.to]}),b>0&&e.jsx("p",{className:"text-[11px] text-gray-600 mt-3",children:wr})]}),e.jsx("button",{onClick:()=>{Oe("order"),c()},className:"text-gray-400 hover:text-gray-600 flex-shrink-0 ml-4",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:Fr,autoComplete:"off",noValidate:!0,className:"booking-form flex-1 flex flex-col overflow-hidden cursor-default",children:[e.jsxs("div",{ref:Y,className:`modal-scroll p-6 space-y-6 overflow-y-auto ${D==="details"?"order-form--details":""}`,children:[$&&e.jsx("div",{className:"bg-red-50 border-2 border-red-500 rounded-lg p-4 text-red-800",children:$}),D==="trip"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{id:"pickupType",tabIndex:-1,children:[e.jsx("label",{className:"block text-gray-700 mb-2",children:t.orderForm.pickupType}),e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:t.orderForm.pickupTypeHint}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("label",{className:`flex items-start gap-3 p-4 border-2 rounded-lg cursor-pointer transition-all ${r.pickupType==="airport"?"border-blue-500 bg-blue-50":Te?"border-red-400 ring-1 ring-red-200":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("input",{type:"radio",name:"pickupType",value:"airport",checked:r.pickupType==="airport",onChange:h,className:"w-4 h-4 text-blue-600"}),e.jsx(He,{className:"w-5 h-5 text-gray-700"}),e.jsx("span",{className:"text-sm leading-snug",children:t.orderForm.airportPickup})]}),e.jsxs("label",{className:`flex items-start gap-3 p-4 border-2 rounded-lg cursor-pointer transition-all ${r.pickupType==="address"?"border-blue-500 bg-blue-50":Te?"border-red-400 ring-1 ring-red-200":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("input",{type:"radio",name:"pickupType",value:"address",checked:r.pickupType==="address",onChange:h,className:"w-4 h-4 text-blue-600"}),e.jsx(ze,{className:"w-5 h-5 text-gray-700"}),e.jsx("span",{className:"text-sm leading-snug",children:t.orderForm.addressPickup})]})]})]}),r.pickupType&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-700",children:t.orderForm.totalPrice}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:"text-blue-900 text-2xl",children:[F," PLN"]}),j&&e.jsx("div",{className:"text-gray-500",children:e.jsx("span",{className:"eur-text",children:j})})]})]})}),ne(),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"date",className:"block text-gray-700 mb-2",children:[e.jsx(_r,{className:"w-4 h-4 inline mr-2"}),t.orderForm.date]}),e.jsx("input",{type:"date",id:"date",name:"date",value:r.date,onChange:h,min:K(),className:T("w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",br),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"time",className:"block text-gray-700 mb-2",children:t.orderForm.pickupTime}),e.jsx("input",{type:"time",id:"time",name:"time",value:r.time,autoComplete:"off",onChange:h,onFocus:()=>ae(!0),onBlur:s=>{ae(!1),je(!0),s.currentTarget.value&&L(r.date,s.currentTarget.value)&&x(t.orderForm.validation.timeSoon)},className:T("w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",yr),required:!0}),!ve&&Ce&&r.time&&Ee&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.orderForm.validation.timeSoon})]})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("button",{type:"button",onClick:()=>{O("trip"),window.requestAnimationFrame(()=>{var s;(s=Y.current)==null||s.scrollTo({top:0,behavior:"smooth"})})},className:"rounded-lg bg-blue-600 px-4 py-2 text-sm font-semibold text-white transition-colors hover:bg-blue-700",children:t.common.back})}),e.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-700",children:t.orderForm.totalPrice}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:"text-blue-900 text-2xl",children:[F," PLN"]}),j&&e.jsx("div",{className:"text-gray-500",children:e.jsx("span",{className:"eur-text",children:j})})]})]})}),ne(),r.pickupType==="airport"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{id:"signService",tabIndex:-1,children:[e.jsx("label",{className:"block text-gray-700 mb-2",children:mr}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsxs("label",{className:`flex items-center gap-3 p-4 border-2 rounded-lg cursor-pointer transition-all ${r.signService==="sign"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("input",{type:"radio",name:"signService",value:"sign",checked:r.signService==="sign",onChange:()=>Pe("sign"),className:"w-4 h-4 text-blue-600"}),e.jsx(Ye,{className:"w-5 h-5 text-gray-700"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-900",children:ur}),e.jsx("div",{className:"text-xs text-gray-500",children:pr})]})]}),e.jsxs("label",{className:`flex items-center gap-3 p-4 border-2 rounded-lg cursor-pointer transition-all ${r.signService==="self"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("input",{type:"radio",name:"signService",value:"self",checked:r.signService==="self",onChange:()=>Pe("self"),className:"w-4 h-4 text-blue-600"}),e.jsx(_e,{className:"w-5 h-5 text-gray-700 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-900",children:gr}),e.jsx("div",{className:"text-xs text-gray-500",children:hr})]})]})]})]}),r.signService==="sign"?e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"signText",className:"block text-gray-700 mb-2",children:[e.jsx(Ye,{className:"w-4 h-4 inline mr-2"}),t.orderForm.signText]}),e.jsx("input",{type:"text",id:"signText",name:"signText",value:r.signText,onChange:h,placeholder:t.orderForm.signPlaceholder,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsxs("div",{className:"mt-3 bg-gradient-to-br from-amber-50 to-orange-50 border-2 border-amber-300 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx(Ue,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-amber-900",children:t.orderForm.signHelp})]}),e.jsxs("div",{className:"bg-white border-2 border-gray-300 rounded-lg p-4 shadow-sm",children:[e.jsx("p",{className:"text-[8px] text-gray-500 mb-2 text-center",children:t.orderForm.signPreview}),e.jsx("div",{className:"bg-white border-4 border-blue-900 rounded p-3 text-center min-h-[60px] flex items-center justify-center",children:e.jsx("p",{className:"text-blue-900 text-lg break-words",children:r.signText||r.name||t.orderForm.signEmpty})})]})]})]}):null,e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"flightNumber",className:"block text-gray-700 mb-2",children:[e.jsx(He,{className:"w-4 h-4 inline mr-2"}),t.orderForm.flightNumber]}),e.jsx("input",{type:"text",id:"flightNumber",name:"flightNumber",value:r.flightNumber,onChange:h,placeholder:t.orderForm.flightPlaceholder,className:T("w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",fr),disabled:r.flightUnknown,autoComplete:"off"}),e.jsxs("label",{className:"mt-2 flex items-center gap-2 text-sm text-gray-600",children:[e.jsx("input",{type:"checkbox",checked:r.flightUnknown,onChange:s=>{const a=s.target.checked;w(i=>({...i,flightUnknown:a,flightNumber:a?"":i.flightNumber}))}}),t.orderForm.flightUnknown]})]})]}),r.pickupType==="address"&&e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"address",className:"block text-gray-700 mb-2",children:[e.jsx(ze,{className:"w-4 h-4 inline mr-2"}),t.orderForm.pickupAddress]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",id:"address",name:"address",value:r.address,onChange:h,onFocus:()=>Z(!0),onBlur:()=>{window.setTimeout(()=>Z(!1),150)},placeholder:t.orderForm.pickupPlaceholder,autoComplete:"street-address",className:T("w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",xr),required:!0}),Ge&&ce.length>0&&e.jsx("div",{className:"absolute z-50 mt-2 w-full rounded-xl border border-slate-200 bg-white shadow-lg overflow-hidden",children:ce.slice(0,6).map(s=>e.jsx("button",{type:"button",className:"block w-full px-4 py-3 text-left text-sm text-slate-800 hover:bg-slate-50 focus:outline-none focus:bg-slate-50",onMouseDown:a=>{a.preventDefault(),w(i=>({...i,address:s.label})),C([]),Z(!1),We()},children:s.label},s.placeId))})]})]}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"passengers",className:"block text-gray-700 mb-2",children:[e.jsx(_e,{className:"w-4 h-4 inline mr-2"}),t.orderForm.passengers]}),e.jsx("select",{id:"passengers",name:"passengers",value:r.passengers,onChange:h,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:n.type==="bus"?e.jsx(e.Fragment,{children:t.orderForm.passengersBus.map((s,a)=>e.jsx("option",{value:5+a,children:s},s))}):e.jsx(e.Fragment,{children:t.orderForm.passengersStandard.map((s,a)=>e.jsx("option",{value:1+a,children:s},s))})})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"largeLuggage",className:"block text-gray-700 mb-2",children:[e.jsx($r,{className:"w-4 h-4 inline mr-2"}),t.orderForm.largeLuggage]}),e.jsxs("select",{id:"largeLuggage",name:"largeLuggage",value:r.largeLuggage,onChange:h,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"no",children:t.orderForm.luggageNo}),e.jsx("option",{value:"yes",children:t.orderForm.luggageYes})]})]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h4",{className:"text-gray-900 mb-4",children:t.orderForm.contactTitle}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-gray-700 mb-2",children:t.orderForm.fullName}),e.jsx("input",{type:"text",id:"name",name:"name",value:r.name,onChange:h,placeholder:t.orderForm.namePlaceholder,autoComplete:"name",className:T("w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",Nr),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-gray-700 mb-2",children:t.orderForm.phoneNumber}),e.jsx("input",{type:"tel",id:"phone",name:"phone",value:r.phone,onChange:h,onBlur:Ze,inputMode:"tel",autoComplete:"tel",placeholder:"+48 123 456 789",className:T("w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",jr),required:!0}),he&&e.jsx("p",{className:"text-sm text-red-600 mt-2",children:he})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-gray-700 mb-2",children:t.orderForm.email}),e.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:s=>{h(s),Sr(s.target.value)},placeholder:t.orderForm.emailPlaceholder,autoComplete:"email",className:T("w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",vr),required:!0}),ee&&e.jsx("p",{className:"text-sm text-red-600 mt-2",children:ee}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:t.orderForm.emailHelp})]}),e.jsxs("details",{className:"rounded-lg border border-gray-200 bg-gray-50 p-4",children:[e.jsx("summary",{className:"cursor-pointer text-sm font-semibold text-gray-800",children:t.orderForm.notesTitle}),e.jsxs("div",{className:"mt-3",children:[e.jsx("textarea",{id:"description",name:"description",value:r.description,onChange:h,placeholder:t.orderForm.notesPlaceholder,rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:t.orderForm.notesHelp})]})]})]})]})]})]}),e.jsx("div",{className:"order-actions-footer",children:D==="trip"?e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:Tr,className:`order-actions-btn w-full py-4 rounded-lg transition-colors ${k?"bg-slate-200 text-slate-700 border border-slate-300 shadow-inner cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,disabled:k,style:{minHeight:"56px"},children:t.common.continue}),e.jsx("p",{className:"text-xs text-center text-gray-500 mt-2",children:t.orderForm.reassurance})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"order-actions-grid grid grid-cols-2 gap-2 sm:gap-3",children:[e.jsx("button",{type:"button",onClick:()=>{O("trip"),window.requestAnimationFrame(()=>{var s;(s=Y.current)==null||s.scrollTo({top:0,behavior:"smooth"})})},className:`order-actions-btn w-full py-4 rounded-lg transition-colors ${k?"bg-slate-200 text-slate-700 border border-slate-300 shadow-inner cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,disabled:k,style:{minHeight:"56px"},children:t.common.back}),e.jsx("button",{type:"submit",className:`order-actions-btn w-full py-4 rounded-lg transition-colors ${k?"bg-slate-200 text-slate-700 border border-slate-300 shadow-inner cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,disabled:k,style:{minHeight:"56px"},children:k?t.orderForm.submitting:e.jsxs("span",{className:"flex flex-col items-center gap-1",children:[e.jsx("span",{children:cr}),j&&e.jsx("span",{className:"order-actions-eur text-[11px] text-blue-100",children:j})]})})]}),e.jsx("p",{className:"text-xs text-center text-gray-500 mt-2",children:t.orderForm.reassurance})]})})]})]})})}export{et as OrderForm};
