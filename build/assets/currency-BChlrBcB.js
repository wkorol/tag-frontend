import{r as d}from"./index-CtOwjY5Y.js";const m=()=>{const e="https://taxiairportgdansk.com";return e.trim()!==""?e:(console.warn("VITE_API_BASE_URL is not set; API calls will fail."),"")},u=1e3*60*60*6,w="eur-rate-cache";let a=null,s=0,i=null;const E=()=>a&&Date.now()-s<u?null:(i||(i=p().finally(()=>{i=null})),i),L=()=>{E()};async function p(){try{const e=m(),o=await fetch(`${e}/api/eur-rate`);if(!o.ok)return null;const n=await o.json(),t=typeof n?.rate=="number"?n.rate:null;if(t&&(a=t,s=Date.now(),typeof window<"u"))try{localStorage.setItem(w,JSON.stringify({rate:t,at:s}))}catch{}return t}catch{return null}}function y(){const[e,o]=d.useState(()=>{if(a&&Date.now()-s<u)return a;if(typeof window<"u")try{const n=localStorage.getItem(w);if(n){const t=JSON.parse(n);if(t?.rate&&t?.at&&Date.now()-t.at<u)return a=t.rate,s=t.at,t.rate}}catch{}return null});return d.useEffect(()=>{if(a&&Date.now()-s<u)return;let n=!1;const t=c=>{c.then(f=>{!n&&f&&o(f)}).catch(()=>null)};i&&t(i);const l=()=>{const c=E();c&&t(c)},r=()=>{l(),window.removeEventListener("scroll",r),window.removeEventListener("click",r),window.removeEventListener("touchstart",r)};typeof window<"u"&&(window.addEventListener("scroll",r,{passive:!0,once:!0}),window.addEventListener("click",r,{once:!0}),window.addEventListener("touchstart",r,{passive:!0,once:!0}));const h=window.setTimeout(l,8e3);return()=>{n=!0,window.removeEventListener("scroll",r),window.removeEventListener("click",r),window.removeEventListener("touchstart",r),window.clearTimeout(h)}},[]),e}function g(e,o){return!o||!Number.isFinite(e)?null:`~${Math.round(e*o)}EUR`}export{g as f,m as g,L as p,y as u};
