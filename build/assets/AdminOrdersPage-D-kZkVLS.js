import{u as v,a as f,y as O,r as l,j as e,L as w,l as y}from"./index-BHxkxN-F.js";import{u as P,p as k,g as E,f as L}from"./currency-8i88fofR.js";const R={pending:"bg-yellow-100 text-yellow-800",confirmed:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",price_proposed:"bg-blue-100 text-blue-800",completed:"bg-emerald-100 text-emerald-800",failed:"bg-orange-100 text-orange-800"};function T(){const{t,locale:x,setLocale:m}=v(),n="pl",u=y(n);f(t.adminOrders.title);const[g]=O(),r=g.get("token")??"",[p,j]=l.useState([]),[i,h]=l.useState(!0),[c,o]=l.useState(null),N=P(),b=s=>{const a=Number(s),d=a>0?L(a,N):null;return e.jsxs("div",{className:"leading-tight",children:[e.jsxs("div",{className:"text-slate-900",children:[s," PLN"]}),e.jsx("div",{className:"min-h-[16px] text-xs text-slate-500",children:d??""})]})};return l.useEffect(()=>{k()},[]),l.useEffect(()=>{if(x!==n&&m(n),!r){o(t.adminOrders.missingToken),h(!1);return}const s=E();fetch(`${s}/api/admin/orders?token=${encodeURIComponent(r)}`).then(async a=>{const d=await a.json().catch(()=>null);if(!a.ok)throw new Error(d?.error??t.adminOrders.errorLoad);return d}).then(a=>{j(a?.orders??[]),o(null)}).catch(a=>{o(a.message)}).finally(()=>h(!1))},[r,x,m]),e.jsx("div",{className:"min-h-screen bg-slate-50 px-4 py-10",children:e.jsxs("div",{className:"mx-auto max-w-6xl",children:[e.jsx("div",{className:"mb-6 flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl text-slate-900",children:t.adminOrders.title}),e.jsx("p",{className:"text-sm text-slate-600",children:t.adminOrders.subtitle})]})}),i&&e.jsx("div",{className:"rounded-xl border border-slate-200 bg-white p-6 text-slate-600",children:t.adminOrders.loading}),!i&&c&&e.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 p-6 text-red-700",children:c}),!i&&!c&&e.jsxs("div",{className:"overflow-hidden rounded-2xl border border-slate-200 bg-white shadow-sm",children:[e.jsxs("div",{className:"grid grid-cols-12 gap-4 border-b border-slate-200 px-6 py-3 text-xs font-semibold uppercase tracking-wider text-slate-500",children:[e.jsx("div",{className:"col-span-2",children:t.adminOrders.columns.order}),e.jsx("div",{className:"col-span-2",children:t.adminOrders.columns.pickup}),e.jsx("div",{className:"col-span-3",children:t.adminOrders.columns.customer}),e.jsx("div",{className:"col-span-2",children:t.adminOrders.columns.price}),e.jsx("div",{className:"col-span-2",children:t.adminOrders.columns.status}),e.jsx("div",{className:"col-span-1 text-right",children:t.adminOrders.columns.open})]}),p.length===0&&e.jsx("div",{className:"px-6 py-8 text-sm text-slate-500",children:t.adminOrders.empty}),p.map(s=>e.jsxs("div",{className:"grid grid-cols-12 gap-4 border-b border-slate-100 px-6 py-4 text-sm text-slate-700",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsxs("div",{className:"text-slate-900 font-medium",children:["#",s.generatedId]}),e.jsx("div",{className:"text-xs text-slate-500",children:s.id})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("div",{className:"text-slate-900",children:s.date}),e.jsx("div",{className:"text-xs text-slate-500",children:s.pickupTime})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("div",{className:"text-slate-900",children:s.fullName}),e.jsx("div",{className:"text-xs text-slate-500",children:s.emailAddress})]}),e.jsxs("div",{className:"col-span-2",children:[b(s.proposedPrice),s.pendingPrice&&e.jsx("div",{className:"text-xs text-blue-600",children:t.adminOrders.pendingPrice(s.pendingPrice)})]}),e.jsx("div",{className:"col-span-2",children:e.jsx("span",{className:`inline-flex rounded-full px-3 py-1 text-xs font-medium ${R[s.status]??"bg-slate-100 text-slate-700"}`,children:s.status.replace("_"," ")})}),e.jsx("div",{className:"col-span-1 text-right",children:e.jsx(w,{to:`${u}/admin/orders/${s.id}?token=${encodeURIComponent(r)}`,className:"text-blue-600 hover:text-blue-700",children:t.adminOrders.view})})]},s.id))]})]})})}export{T as AdminOrdersPage};
