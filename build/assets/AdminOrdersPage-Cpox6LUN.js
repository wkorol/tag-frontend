import{u as N,x as b,r as d,j as e,L as v,l as f}from"./index-DxTwkjtA.js";import{g as O}from"./api-KPPBra2D.js";const w={pending:"bg-yellow-100 text-yellow-800",confirmed:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",price_proposed:"bg-blue-100 text-blue-800",completed:"bg-emerald-100 text-emerald-800",failed:"bg-orange-100 text-orange-800"};function P(){const{t:a,locale:o,setLocale:x}=N(),r="pl",u=f(r),[g]=b(),l=g.get("token")??"",[m,j]=d.useState([]),[n,p]=d.useState(!0),[i,c]=d.useState(null);return d.useEffect(()=>{if(o!==r&&x(r),!l){c(a.adminOrders.missingToken),p(!1);return}const s=O();fetch(`${s}/api/admin/orders?token=${encodeURIComponent(l)}`).then(async t=>{const h=await t.json().catch(()=>null);if(!t.ok)throw new Error(h?.error??a.adminOrders.errorLoad);return h}).then(t=>{j(t?.orders??[]),c(null)}).catch(t=>{c(t.message)}).finally(()=>p(!1))},[l,o,x]),e.jsx("div",{className:"min-h-screen bg-slate-50 px-4 py-10",children:e.jsxs("div",{className:"mx-auto max-w-6xl",children:[e.jsx("div",{className:"mb-6 flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl text-slate-900",children:a.adminOrders.title}),e.jsx("p",{className:"text-sm text-slate-600",children:a.adminOrders.subtitle})]})}),n&&e.jsx("div",{className:"rounded-xl border border-slate-200 bg-white p-6 text-slate-600",children:a.adminOrders.loading}),!n&&i&&e.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 p-6 text-red-700",children:i}),!n&&!i&&e.jsxs("div",{className:"overflow-hidden rounded-2xl border border-slate-200 bg-white shadow-sm",children:[e.jsxs("div",{className:"grid grid-cols-12 gap-4 border-b border-slate-200 px-6 py-3 text-xs font-semibold uppercase tracking-wider text-slate-500",children:[e.jsx("div",{className:"col-span-2",children:a.adminOrders.columns.order}),e.jsx("div",{className:"col-span-2",children:a.adminOrders.columns.pickup}),e.jsx("div",{className:"col-span-3",children:a.adminOrders.columns.customer}),e.jsx("div",{className:"col-span-2",children:a.adminOrders.columns.price}),e.jsx("div",{className:"col-span-2",children:a.adminOrders.columns.status}),e.jsx("div",{className:"col-span-1 text-right",children:a.adminOrders.columns.open})]}),m.length===0&&e.jsx("div",{className:"px-6 py-8 text-sm text-slate-500",children:a.adminOrders.empty}),m.map(s=>e.jsxs("div",{className:"grid grid-cols-12 gap-4 border-b border-slate-100 px-6 py-4 text-sm text-slate-700",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsxs("div",{className:"text-slate-900 font-medium",children:["#",s.generatedId]}),e.jsx("div",{className:"text-xs text-slate-500",children:s.id})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("div",{className:"text-slate-900",children:s.date}),e.jsx("div",{className:"text-xs text-slate-500",children:s.pickupTime})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("div",{className:"text-slate-900",children:s.fullName}),e.jsx("div",{className:"text-xs text-slate-500",children:s.emailAddress})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsxs("div",{className:"text-slate-900",children:[s.proposedPrice," PLN"]}),s.pendingPrice&&e.jsx("div",{className:"text-xs text-blue-600",children:a.adminOrders.pendingPrice(s.pendingPrice)})]}),e.jsx("div",{className:"col-span-2",children:e.jsx("span",{className:`inline-flex rounded-full px-3 py-1 text-xs font-medium ${w[s.status]??"bg-slate-100 text-slate-700"}`,children:s.status.replace("_"," ")})}),e.jsx("div",{className:"col-span-1 text-right",children:e.jsx(v,{to:`${u}/admin/orders/${s.id}?token=${encodeURIComponent(l)}`,className:"text-blue-600 hover:text-blue-700",children:a.adminOrders.view})})]},s.id))]})]})})}export{P as AdminOrdersPage};
