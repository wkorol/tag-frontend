import{c as T,u as Te,a as Ce,r as i,j as e,M as Z,U as ee}from"./index-Cs4EKhXs.js";import{u as Le,f as se,g as Ae}from"./currency-BQ0ZLwpv.js";import{F as U,P as Fe,L as Ee,p as Pe,b as Re}from"./orderNotes-BbPdJs0_.js";import{C as $e}from"./calendar-dmFN0leD.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],_=T("circle-alert",Ue);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],ae=T("copy",_e);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],re=T("square-pen",Ie);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],te=T("trash-2",Me),I=Ae(),Be=20,ne=()=>{const h=new Date,s=h.getFullYear(),v=String(h.getMonth()+1).padStart(2,"0"),k=String(h.getDate()).padStart(2,"0");return`${s}-${v}-${k}`},De=()=>{const h=new Date,s=String(h.getHours()).padStart(2,"0"),v=String(h.getMinutes()).padStart(2,"0");return`${s}:${v}`};function Ye({orderId:h}){const{t:s,locale:v}=Te(),k=v==="pl"?"pl":"en";Ce(s.manageOrder.manageTitle);const le=i.useMemo(()=>new URLSearchParams(window.location.search).get("token")??"",[]),ie=new URLSearchParams(window.location.search).get("cancelled")==="1",M=new URLSearchParams(window.location.search).get("update")??"",w=i.useMemo(()=>new Set(M.split(",").map(t=>t.trim()).filter(Boolean)),[M]),de=w.size>0,[ce,oe]=i.useState(!1),[me,C]=i.useState(!1),[a,B]=i.useState(null),[S,O]=i.useState(!1),[ge,L]=i.useState(!1),[pe,ue]=i.useState(!1),[xe,qe]=i.useState(!1),[he,A]=i.useState(!1),[be,F]=i.useState(!0),[y,p]=i.useState(null),[E,fe]=i.useState(""),[f,D]=i.useState(""),[b,je]=i.useState(le),[q,z]=i.useState(!1),[Ne,ye]=i.useState(0),[H,P]=i.useState(null),R=i.useRef(null),J=Le(),j=a?.status==="pending"||a?.status==="confirmed";a&&a.price<=0;const[r,N]=i.useState({signService:"self",signText:"",flightNumber:"",passengers:"1",largeLuggage:"no",date:"",time:"",name:"",email:"",phone:"",address:"",description:""}),m=de&&!ce,l=t=>S&&(!m||w.has(t)),u=(t,d)=>{const c=m&&w.has(t);return`w-full px-4 py-3 border ${c?"border-red-400 bg-red-50":"border-gray-300"} rounded-lg ${d?"focus:ring-2 focus:ring-blue-500 focus:border-transparent":""} ${!d&&!c?"bg-gray-50":""}`};i.useEffect(()=>{f||b?(async()=>{z(!0),F(!0),p(null);try{const d=b?{accessToken:b}:{emailAddress:f},c=await fetch(`${I}/api/orders/${h}/access`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}),g=await c.json().catch(()=>null);if(!c.ok){p(g?.error??s.manageOrder.errors.load);return}const n=g,o=Pe(n.additionalNotes),$=n.carType===1?"bus":"standard",Oe=o.route??{from:n.pickupAddress,to:"Destination",type:$},Y=o.pickupType==="airport"?"airport":"address",G=o.signService==="sign"||o.signService==="self"?o.signService:o.signText?"sign":"self",W=o.signText??"",K=o.passengers??"1",Q=o.largeLuggage??"no",X=typeof o.notes=="string"?o.notes:"",ke=Number(n.proposedPrice)||0,Se={id:n.id,generatedId:n.generatedId??n.id.slice(0,4).toUpperCase(),route:Oe,pickupType:Y,signService:G,signText:W,flightNumber:n.flightNumber,passengers:K,largeLuggage:Q,date:n.date,time:n.pickupTime,name:n.fullName,email:n.emailAddress,phone:n.phoneNumber,price:ke,status:n.status==="confirmed"?"confirmed":n.status==="completed"?"completed":n.status==="failed"?"failed":n.status==="rejected"?"rejected":n.status==="price_proposed"?"price_proposed":"pending",pickupAddress:n.pickupAddress,description:X,rejectionReason:n.rejectionReason??""};B(Se),N({signService:G,signText:W,flightNumber:n.flightNumber,passengers:K,largeLuggage:Q,date:n.date,time:n.pickupTime,name:n.fullName,email:n.emailAddress,phone:n.phoneNumber,address:Y==="address"?n.pickupAddress:"",description:X})}catch{p(s.manageOrder.errors.loadNetwork)}finally{F(!1),z(!1)}})():F(!1)},[h,f,b,Ne]),i.useEffect(()=>{a&&m&&j&&O(!0)},[a,m,j]);const x=t=>{const{name:d,value:c}=t.target,g=ne(),n=De();if(d==="date"&&c<g){N({...r,[d]:g});return}if(d==="date"){const o=c<g?g:c,$=o===g&&r.time&&r.time<n?n:r.time;N({...r,date:o,time:$});return}N({...r,[d]:c})},ve=async()=>{if(!a)return;p(null);const t=Re({pickupType:a.pickupType,signService:a.pickupType==="airport"?r.signService:"self",signFee:a.pickupType==="airport"&&r.signService==="sign"?Be:0,signText:r.signService==="sign"?r.signText:"",passengers:r.passengers,largeLuggage:r.largeLuggage,route:a.route,notes:r.description.trim()}),d=a.pickupType==="airport"||m&&w.has("flight"),c={carType:a.route.type==="bus"?1:2,pickupAddress:a.pickupType==="address"?r.address:a.route.from,proposedPrice:String(a.price),date:r.date,pickupTime:r.time,flightNumber:d?r.flightNumber:"N/A",fullName:r.name,emailAddress:r.email,currentEmailAddress:f,phoneNumber:r.phone,additionalNotes:t,adminUpdateRequest:m,adminUpdateFields:m?Array.from(w):[],locale:k};b?c.accessToken=b:c.currentEmailAddress=f;try{const g=await fetch(`${I}/api/orders/${a.id}`,{method:"PUT",headers:{"Content-Type":"application/json","Accept-Language":k},body:JSON.stringify(c)}),n=await g.json().catch(()=>null);if(!g.ok){p(n?.error??s.manageOrder.errors.save);return}B({...a,signService:r.signService,signText:r.signService==="sign"?r.signText:"",flightNumber:c.flightNumber,passengers:r.passengers,largeLuggage:r.largeLuggage,date:r.date,time:r.time,name:r.name,email:r.email,phone:r.phone,pickupAddress:c.pickupAddress,description:r.description.trim(),status:a.status==="confirmed"&&!m?"pending":a.status}),!b&&r.email&&r.email!==f&&D(r.email),O(!1),m&&(oe(!0),C(!0)),m||A(!0)}catch{p(s.manageOrder.errors.saveNetwork)}},we=async()=>{if(a){p(null);try{const t=b?{accessToken:b}:{emailAddress:f},d=await fetch(`${I}/api/orders/${a.id}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!d.ok){const c=await d.json().catch(()=>null);p(c?.error??s.manageOrder.errors.cancel);return}ue(!0),L(!1)}catch{p(s.manageOrder.errors.cancelNetwork)}}},V=async(t,d)=>{try{await navigator.clipboard.writeText(t),P(s.manageOrder.errors.copySuccess)}catch{P(s.manageOrder.errors.copyFail)}R.current!==null&&window.clearTimeout(R.current),R.current=window.setTimeout(()=>{P(null)},2e3)};return be?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"bg-white rounded-xl max-w-md w-full p-8 text-center",children:e.jsx("p",{className:"text-gray-700",children:s.manageOrder.loading})})}):y&&!a?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"bg-white rounded-xl max-w-md w-full p-8 text-center",children:e.jsx("p",{className:"text-red-700",children:y})})}):a?pe||ie?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"bg-white rounded-xl max-w-md w-full p-8",children:e.jsxs("div",{className:"bg-red-50 border-2 border-red-500 rounded-xl p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-500 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(te,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"text-red-900 mb-2",children:s.manageOrder.cancelledTitle}),e.jsx("p",{className:"text-red-800 mb-4",children:s.manageOrder.cancelledBody}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.orderForm.orderId," ",a?.id??h]})]})})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 py-12 px-4",children:[e.jsx("div",{className:"max-w-3xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden relative",children:[H&&e.jsx("div",{className:"absolute right-6 top-6 bg-gray-900 text-white text-sm px-4 py-2 rounded-lg shadow-lg",children:H}),e.jsxs("div",{className:"bg-blue-600 text-white p-6",children:[e.jsx("h1",{className:"text-2xl mb-2",children:s.manageOrder.manageTitle}),e.jsxs("div",{className:"space-y-2 text-blue-100 text-sm",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("span",{children:[s.manageOrder.orderLabel," ",a.generatedId]}),e.jsxs("button",{type:"button",onClick:()=>V(a.generatedId,s.manageOrder.copyOrderLabel),className:"inline-flex items-center gap-1 bg-white/15 hover:bg-white/25 px-2.5 py-1 rounded-full text-[8px]",children:[e.jsx(ae,{className:"w-3 h-3"}),s.manageOrder.copyAction]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("span",{children:[s.manageOrder.orderIdLabel,": ",a.id]}),e.jsxs("button",{type:"button",onClick:()=>V(a.id,s.manageOrder.copyOrderIdLabel),className:"inline-flex items-center gap-1 bg-white/15 hover:bg-white/25 px-2.5 py-1 rounded-full text-[8px]",children:[e.jsx(ae,{className:"w-3 h-3"}),s.manageOrder.copyAction]})]})]})]}),y&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 m-6",children:e.jsx("p",{className:"text-sm text-red-700",children:y})}),me&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>C(!1),children:e.jsx("div",{className:"bg-white rounded-xl max-w-md w-full p-8 relative",onClick:t=>t.stopPropagation(),children:e.jsxs("div",{className:"bg-green-50 border-2 border-green-500 rounded-xl p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h3",{className:"text-green-900 mb-2",children:s.manageOrder.detailsUpdatedTitle}),e.jsx("p",{className:"text-green-800 mb-4",children:s.manageOrder.detailsUpdatedBody(r.date,r.time)}),e.jsx("button",{onClick:()=>C(!1),className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors",children:s.common.close})]})})}),he&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>A(!1),children:e.jsx("div",{className:"bg-white rounded-xl max-w-md w-full p-8 relative",onClick:t=>t.stopPropagation(),children:e.jsxs("div",{className:"bg-yellow-50 border-2 border-yellow-400 rounded-xl p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-yellow-400 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(_,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"text-yellow-900 mb-2",children:s.manageOrder.updateSubmittedTitle}),e.jsx("p",{className:"text-yellow-800 mb-4",children:s.manageOrder.updateSubmittedBody}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-yellow-700 mb-4",children:[e.jsx("span",{className:"inline-flex h-2.5 w-2.5 rounded-full bg-yellow-500 animate-pulse"}),e.jsx("span",{className:"text-sm",children:s.manageOrder.awaiting})]}),e.jsx("button",{onClick:()=>A(!1),className:"bg-yellow-500 text-white px-6 py-2 rounded-lg hover:bg-yellow-600 transition-colors",children:s.common.close})]})})}),xe&&null,e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-gray-900 mb-3",children:s.manageOrder.transferRoute}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"w-5 h-5 text-blue-600"}),e.jsxs("span",{className:"text-gray-700",children:[a.route.from," â†’ ",a.route.to]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"text-gray-700",children:[s.manageOrder.priceLabel," ",a.price>0?e.jsxs("span",{className:"font-bold text-blue-600",children:[a.price," PLN"]}):e.jsx("span",{className:"font-semibold text-blue-700",children:s.manageOrder.pricePending})]})}),a.price>0&&se(a.price,J)&&e.jsx("div",{className:"text-gray-500",children:e.jsx("span",{className:"eur-text",children:se(a.price,J)})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${a.status==="confirmed"?"bg-green-100 text-green-800":a.status==="completed"?"bg-emerald-100 text-emerald-800":a.status==="failed"?"bg-orange-100 text-orange-800":a.status==="rejected"?"bg-red-100 text-red-800":a.status==="price_proposed"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:a.status==="confirmed"?s.manageOrder.statusConfirmed:a.status==="completed"?s.manageOrder.statusCompleted:a.status==="failed"?s.manageOrder.statusFailed:a.status==="rejected"?s.manageOrder.statusRejected:a.status==="price_proposed"?s.manageOrder.statusPriceProposed:s.manageOrder.statusPending})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-gray-900",children:s.manageOrder.bookingDetails}),!S&&j&&e.jsxs("button",{onClick:()=>O(!0),className:"flex items-center gap-2 text-blue-600 hover:text-blue-700",children:[e.jsx(re,{className:"w-4 h-4"}),m?s.manageOrder.updateRequested:s.manageOrder.editDetails]})]}),!S&&a.status==="confirmed"&&!m&&e.jsx("div",{className:"mb-4 rounded-lg border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-900",children:s.manageOrder.confirmedEditNote}),m&&e.jsx("div",{className:"mb-4 rounded-lg border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-800",children:s.manageOrder.updateFieldsNote}),!j&&e.jsxs("div",{className:`border-l-4 p-4 ${a.status==="confirmed"?"bg-green-50 border-green-500":a.status==="completed"?"bg-emerald-50 border-emerald-500":a.status==="failed"?"bg-orange-50 border-orange-500":a.status==="price_proposed"?"bg-blue-50 border-blue-500":"bg-red-50 border-red-500"}`,children:[e.jsx("p",{className:`text-sm ${a.status==="confirmed"?"text-green-700":a.status==="completed"?"text-emerald-700":a.status==="failed"?"text-orange-700":a.status==="price_proposed"?"text-blue-700":"text-red-700"}`,children:a.status==="confirmed"?s.manageOrder.confirmedNote:a.status==="completed"?s.manageOrder.completedNote:a.status==="failed"?s.manageOrder.failedNote:a.status==="price_proposed"?s.manageOrder.priceProposedNote:s.manageOrder.rejectedNote}),a.status==="rejected"&&a.rejectionReason&&e.jsxs("p",{className:"mt-2 text-sm text-red-700",children:[s.manageOrder.rejectionReasonLabel," ",a.rejectionReason]})]}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"date",className:"block text-gray-700 mb-2",children:[e.jsx($e,{className:"w-4 h-4 inline mr-2"}),s.manageOrder.date]}),e.jsx("input",{type:"date",id:"date",name:"date",value:r.date,onChange:x,min:ne(),disabled:!l("date"),className:u("date",l("date"))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"time",className:"block text-gray-700 mb-2",children:s.manageOrder.pickupTime}),e.jsx("input",{type:"time",id:"time",name:"time",value:r.time,onChange:x,disabled:!l("time"),className:u("time",l("time"))})]})]}),a.pickupType==="airport"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 mb-2",children:s.manageOrder.signServiceTitle}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsxs("label",{className:`flex items-start gap-3 p-4 border-2 rounded-lg cursor-pointer transition-all ${r.signService==="sign"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("input",{type:"radio",name:"signService",value:"sign",checked:r.signService==="sign",onChange:()=>N(t=>({...t,signService:"sign"})),className:"w-4 h-4 text-blue-600",disabled:!l("signText")}),e.jsx(U,{className:"w-5 h-5 text-gray-700"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-900",children:s.manageOrder.signServiceSign}),e.jsx("div",{className:"text-xs text-gray-500",children:s.manageOrder.signServiceFee})]})]}),e.jsxs("label",{className:`flex items-start gap-3 p-4 border-2 rounded-lg cursor-pointer transition-all ${r.signService==="self"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("input",{type:"radio",name:"signService",value:"self",checked:r.signService==="self",onChange:()=>N(t=>({...t,signService:"self",signText:""})),className:"w-4 h-4 text-blue-600",disabled:!l("signText")}),e.jsx(ee,{className:"w-5 h-5 text-gray-700 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-900",children:s.manageOrder.signServiceSelf}),e.jsx("div",{className:"text-xs text-gray-500",children:s.manageOrder.signServiceSelfNote})]})]})]})]}),r.signService==="sign"&&e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"signText",className:"block text-gray-700 mb-2",children:[e.jsx(U,{className:"w-4 h-4 inline mr-2"}),s.manageOrder.signText]}),e.jsx("input",{type:"text",id:"signText",name:"signText",value:r.signText,onChange:x,disabled:!l("signText"),className:u("signText",l("signText"))})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"flightNumber",className:"block text-gray-700 mb-2",children:[e.jsx(Fe,{className:"w-4 h-4 inline mr-2"}),s.manageOrder.flightNumber]}),e.jsx("input",{type:"text",id:"flightNumber",name:"flightNumber",value:r.flightNumber,onChange:x,disabled:!l("flight"),className:u("flight",l("flight"))})]})]}),a.pickupType==="address"&&e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"address",className:"block text-gray-700 mb-2",children:[e.jsx(Z,{className:"w-4 h-4 inline mr-2"}),s.manageOrder.pickupAddress]}),e.jsx("textarea",{id:"address",name:"address",value:r.address,onChange:x,disabled:!l("address"),rows:3,className:u("address",l("address"))})]}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"passengers",className:"block text-gray-700 mb-2",children:[e.jsx(ee,{className:"w-4 h-4 inline mr-2"}),s.manageOrder.passengers]}),e.jsx("select",{id:"passengers",name:"passengers",value:r.passengers,onChange:x,disabled:!l("passengers"),className:u("passengers",l("passengers")),children:a.route.type==="bus"?e.jsx(e.Fragment,{children:s.manageOrder.passengersBus.map((t,d)=>e.jsx("option",{value:5+d,children:t},t))}):e.jsx(e.Fragment,{children:s.manageOrder.passengersStandard.map((t,d)=>e.jsx("option",{value:1+d,children:t},t))})})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"largeLuggage",className:"block text-gray-700 mb-2",children:[e.jsx(Ee,{className:"w-4 h-4 inline mr-2"}),s.manageOrder.largeLuggage]}),e.jsxs("select",{id:"largeLuggage",name:"largeLuggage",value:r.largeLuggage,onChange:x,disabled:!l("largeLuggage"),className:u("largeLuggage",l("largeLuggage")),children:[e.jsx("option",{value:"no",children:s.manageOrder.luggageNo}),e.jsx("option",{value:"yes",children:s.manageOrder.luggageYes})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-gray-900 mb-4",children:s.manageOrder.contactTitle}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-gray-700 mb-2",children:s.manageOrder.fullName}),e.jsx("input",{type:"text",id:"name",name:"name",value:r.name,onChange:x,disabled:!l("name"),className:u("name",l("name"))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-gray-700 mb-2",children:s.manageOrder.phoneNumber}),e.jsx("input",{type:"tel",id:"phone",name:"phone",value:r.phone,onChange:x,disabled:!l("phone"),className:u("phone",l("phone"))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-gray-700 mb-2",children:s.manageOrder.email}),e.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:x,disabled:!l("email"),className:u("email",l("email"))})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"description",className:"block text-gray-700 mb-2",children:[e.jsx(U,{className:"w-4 h-4 inline mr-2"}),s.manageOrder.notesTitle]}),e.jsx("textarea",{id:"description",name:"description",value:r.description,onChange:x,disabled:!l("description"),rows:3,className:u("description",l("description"))})]})]})]})]}),e.jsx("div",{className:"border-t pt-6 space-y-3",children:S?e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:ve,className:"flex-1 bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors",disabled:!j,children:s.manageOrder.saveChanges}),e.jsx("button",{onClick:()=>{N({signService:a.signService,signText:a.signText,flightNumber:a.flightNumber,passengers:a.passengers,largeLuggage:a.largeLuggage,date:a.date,time:a.time,name:a.name,email:a.email,phone:a.phone,address:a.pickupType==="address"?a.pickupAddress:"",description:a.description}),O(!1)},className:"flex-1 bg-gray-200 text-gray-800 py-3 rounded-lg hover:bg-gray-300 transition-colors",children:s.manageOrder.cancelEdit})]}):e.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[j&&e.jsxs("button",{onClick:()=>O(!0),className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(re,{className:"w-5 h-5"}),s.manageOrder.editBooking]}),j&&e.jsxs("button",{onClick:()=>L(!0),className:"w-full bg-red-600 text-white py-3 rounded-lg hover:bg-red-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(te,{className:"w-5 h-5"}),s.manageOrder.cancelBooking]})]})}),e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(_,{className:"h-5 w-5 text-yellow-400"})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-yellow-700",children:s.manageOrder.changesNotice})})]})})]})]})}),ge&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(_,{className:"w-6 h-6 text-red-600"})}),e.jsx("h3",{className:"text-gray-900",children:s.manageOrder.cancelPromptTitle})]}),e.jsx("p",{className:"text-gray-700 mb-6",children:s.manageOrder.cancelPromptBody}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:we,className:"flex-1 bg-red-600 text-white py-3 rounded-lg hover:bg-red-700 transition-colors",children:s.manageOrder.confirmCancel}),e.jsx("button",{onClick:()=>L(!1),className:"flex-1 bg-gray-200 text-gray-800 py-3 rounded-lg hover:bg-gray-300 transition-colors",children:s.manageOrder.keepBooking})]})]})})]}):e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full p-8",children:[e.jsx("h2",{className:"text-xl text-gray-900 mb-4",children:s.manageOrder.accessTitle}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:s.manageOrder.accessBody}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"email",value:E,onChange:t=>fe(t.target.value),placeholder:s.manageOrder.accessPlaceholder,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0}),y&&e.jsx("div",{className:"bg-red-50 border-2 border-red-500 rounded-lg p-3 text-red-800 text-sm",children:y}),e.jsx("button",{onClick:()=>{if(!E){p(s.manageOrder.errors.emailRequired);return}p(null),je(""),D(E.trim()),ye(t=>t+1)},className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-70",disabled:q,children:q?s.manageOrder.accessChecking:s.manageOrder.accessAction})]})]})})}export{Ye as ManageOrder};
