import{u as xr,r as o,j as e,l as fr,o as Te,U as Ee,I as Ce,p as $,q as N,v as Pe,w as br,x as yr}from"./index-DeclBpxo.js";import{u as jr,f as Nr,g as vr}from"./currency-CKIF4vCx.js";import{P as Ae,F as Le,L as wr,b as kr}from"./orderNotes-BFOHTMCQ.js";import{l as Fr,u as Sr,i as Tr}from"./scrollLock-BK_fv_5M.js";import{M as De}from"./map-pin-B3IAUauw.js";import{C as Er}from"./calendar--FcGccUw.js";const $e="AIzaSyCZn_Y7YkTDjJe8715PJ0jVbcwaim7kKFE",Cr={lat:54.352,lon:18.6466},Pr=6e4,H=()=>{const n=new Date,d=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),c=String(n.getDate()).padStart(2,"0");return`${d}-${t}-${c}`},Ar=n=>n.trim(),Lr=(n,d)=>{const t=d/111320,c=d/(111320*Math.cos(n.lat*Math.PI/180));return{north:n.lat+t,south:n.lat-t,east:n.lon+c,west:n.lon-c}},Dr=40,P=(n,d)=>{if(!n||!d)return!1;const t=new Date(`${n}T${d}:00`);if(Number.isNaN(t.getTime()))return!1;const c=new Date(Date.now()+Dr*60*1e3);return t.getTime()<c.getTime()},U=n=>n?n<H():!1,te=(n,d)=>{const t=n.trim();if(/[A-Za-z]/.test(t))return d.phoneLetters;const c=t.replace(/\D/g,"");return c.length<7||c.length>15?d.phoneLength:null},se=(n,d)=>{const t=n.trim();return t?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)?null:d.email:d.emailRequired};function qr({route:n,onClose:d}){const{t,locale:c}=xr(),ae=c==="pl"?"pl":"en",Re=fr(c),Y=o.useMemo(()=>n.pickupTypeDefault?n.pickupTypeDefault:n.from===t.pricing.routes.airport?"airport":n.to===t.pricing.routes.airport?"address":"",[n.pickupTypeDefault,n.from,n.to,t.pricing.routes.airport]),[ne,V]=o.useState(!1),z=o.useRef(null),R=o.useRef(null),[oe,T]=o.useState([]),[Be,K]=o.useState(!1),[A,B]=o.useState("trip"),[ie,le]=o.useState(!1),[r,v]=o.useState({pickupType:Y,signService:"self",signText:"",flightNumber:"",flightUnknown:!1,passengers:"1",largeLuggage:"no",address:"",date:H(),time:"",name:"",phone:"",email:"",description:""});o.useEffect(()=>(Fr(),()=>Sr()),[]),o.useEffect(()=>{if(typeof window>"u")return;const a=window.setTimeout(()=>{v(s=>({...s,time:""})),fe(!1),ee(!1)},0);return()=>window.clearTimeout(a)},[]),o.useEffect(()=>{if(typeof window>"u")return;if(window.google?.maps){V(!0);return}const a=document.querySelector('script[data-google-maps="true"]');if(a){a.addEventListener("load",()=>V(!0),{once:!0});return}const s=document.createElement("script");s.src=`https://maps.googleapis.com/maps/api/js?key=${encodeURIComponent($e)}&loading=async&v=weekly`,s.async=!0,s.defer=!0,s.dataset.googleMaps="true",s.addEventListener("load",()=>V(!0)),document.head.appendChild(s)},[]);const de=async()=>{if(!ne)return null;const a=window.google;if(!a?.maps?.importLibrary)return null;if(z.current)return z.current;const s=await a.maps.importLibrary("places");return z.current=s,s},Ie=async()=>{const a=await de();return a?(R.current||(R.current=new a.AutocompleteSessionToken),R.current):null},Me=()=>{R.current=null},Oe=()=>{const a=te(r.phone,t.orderForm.validation);J(a)},[_e,qe]=o.useState(!1),[G,Ue]=o.useState(null),[ce,He]=o.useState(null),[L,h]=o.useState(null),[me,J]=o.useState(null),[W,Z]=o.useState(null),[w,ue]=o.useState(!1),[Ye,Ve]=o.useState(n.priceDay),[x,ze]=o.useState({label:t.orderForm.rate.day,reason:t.orderForm.rate.reasonDay,price:n.priceDay}),[pe,Ke]=o.useState(null),I=o.useRef(null),Q=o.useRef(null),[ge,X]=o.useState(null),[he,Ge]=o.useState(null),Je=jr(),M=o.useRef(!1),[xe,We]=o.useState(!1),[Ze,fe]=o.useState(!1),[be,ee]=o.useState(!1),ye=r.pickupType==="airport"&&r.signService==="sign"?20:0,E=Ye+ye,j=Nr(E,Je),je=Y?Y==="airport":n.from===t.pricing.routes.airport,C=(r.pickupType==="airport"?!je:r.pickupType==="address"?je:!1)?{from:n.to,to:n.from,type:n.type}:{from:n.from,to:n.to,type:n.type},Qe=t.orderForm.signServiceTitle??"Airport pickup options",Xe=t.orderForm.signServiceSign??"Meet with a name sign",er=t.orderForm.signServiceFee??"+20 PLN added to final price",rr=t.orderForm.signServiceSelf??"Find the driver yourself",tr=t.orderForm.signServiceSelfNote??"",O=!te(r.phone,t.orderForm.validation),_=!se(r.email,t.orderForm.validation),Ne=a=>{Ke(a),Q.current!==null&&(window.clearTimeout(Q.current),Q.current=null)},ve=(a,s,i)=>typeof t.orderForm.rate?.banner=="function"?t.orderForm.rate.banner(a,s,i):`${a}: ${s} PLN (${i})`,re=()=>pe?e.jsx("div",{className:"mt-3 bg-gradient-to-br from-amber-50 to-orange-50 border-2 border-amber-300 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ce,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-amber-900",children:pe})]})}):null,k=A==="trip"?ie:xe,we=k&&!r.pickupType,sr=k&&r.pickupType==="address"&&!r.address.trim(),ar=k&&r.pickupType==="airport"&&!r.flightUnknown&&!r.flightNumber.trim(),nr=k&&(!r.date||U(r.date)),ke=P(r.date,r.time),Fe=(A==="trip"?ie:xe)||Ze,or=Fe&&!be&&(!r.time||ke),ir=k&&!r.name.trim(),lr=k&&(!r.phone.trim()||!O),dr=k&&(!r.email.trim()||!_),F=(a,s)=>`${a}${s?" border-red-400 bg-red-50 focus:ring-red-200 focus:border-red-500":""}`,f=o.useMemo(()=>{const a=!!r.date&&!U(r.date),s=!!r.time&&!P(r.date,r.time),i=!!r.pickupType,l=r.pickupType==="address"?!!r.address.trim():!0,g=r.pickupType==="airport"?r.flightUnknown?!0:!!r.flightNumber.trim():!0,u=!!r.name.trim(),y=!!r.phone.trim()&&O,b=!!r.email.trim()&&_;return[i,a,s,l,g,u,y,b].filter(D=>!D).length},[r.date,r.time,r.pickupType,r.address,r.flightUnknown,r.flightNumber,r.name,r.phone,r.email,O,_]),cr=typeof t.common.remainingFields=="function"?t.common.remainingFields(f):{pl:`Pozostało pól: ${f}`,de:`Verbleibende Felder: ${f}`,fi:`Jäljellä olevat kentät: ${f}`,no:`Gjenstående felt: ${f}`,sv:`Återstående fält: ${f}`,da:`Resterende felter: ${f}`,en:`Remaining fields: ${f}`}[c]??`Remaining fields: ${f}`,S=a=>{typeof window>"u"||window.requestAnimationFrame(()=>{const s=document.getElementById(a);s&&(s.scrollIntoView({behavior:"smooth",block:"center"}),s instanceof HTMLElement&&s.focus({preventScroll:!0}))})},mr=a=>{if(typeof window>"u"||!br())return;const s=window.gtag;if(typeof s!="function"||!yr())return;const i={send_to:"AW-17948664296/MWNwCK_nz_cbEOjDy-5C"};a&&(i.transaction_id=a),s("event","conversion",i)};o.useEffect(()=>{if(r.pickupType!=="address"){T([]);return}const a=Ar(r.address);if(a.length<3){T([]);return}let s=!0;const i=window.setTimeout(async()=>{try{const l=await de();if(!l){T([]);return}const g=await Ie(),u={input:a,region:"pl",language:c,locationBias:Lr(Cr,Pr),sessionToken:g??void 0},{suggestions:y}=await l.AutocompleteSuggestion.fetchAutocompleteSuggestions(u),b=(Array.isArray(y)?y:[]).map(m=>m.placePrediction).filter(m=>m?.placeId).map(m=>({label:typeof m?.text?.text=="string"?m.text.text:m?.text?.toString?.()??"",placeId:String(m.placeId??"")})).filter(m=>m.label&&m.placeId);if(!s)return;T(b)}catch{if(!s)return;T([])}},350);return()=>{s=!1,window.clearTimeout(i)}},[r.address,r.pickupType,c,ne]),o.useEffect(()=>{if(typeof window>"u")return;const a=r.date?new Date(`${r.date}T00:00:00`).getFullYear():new Date().getFullYear();if(!Number.isFinite(a)||he===a)return;Ge(a);const s=`pl-holidays-${a}`,i=window.localStorage.getItem(s);if(i)try{const l=JSON.parse(i);if(Array.isArray(l)){X(new Set(l));return}}catch{}fetch(`https://date.nager.at/api/v3/PublicHolidays/${a}/PL`).then(l=>l.ok?l.json():[]).then(l=>{const g=Array.isArray(l)?l.map(u=>u.date).filter(u=>!!u):[];X(new Set(g)),window.localStorage.setItem(s,JSON.stringify(g))}).catch(()=>{X(null)})},[r.date,he]),o.useEffect(()=>{let a=!1;const s=[];if(r.time){const[l,g]=r.time.split(":").map(Number),u=l*60+g+30,y=Math.floor(u/60)%24,b=y>=22||y<6;b&&s.push(t.orderForm.rate.reasonLate),a=a||b}if(r.date){const l=new Date(`${r.date}T00:00:00`);!Number.isNaN(l.getTime())&&Tr(l,ge)&&(s.push(t.orderForm.rate.reasonHoliday),a=!0)}const i=a?n.priceNight:n.priceDay;Ve(i),ze({label:a?t.orderForm.rate.night:t.orderForm.rate.day,reason:s.length?s.join(" + "):t.orderForm.rate.reasonDay,price:i})},[r.time,r.date,ge,n.priceDay,n.priceNight,t]),o.useEffect(()=>{if(!(!r.time&&!r.date)){if(I.current===null){I.current=x.price,Ne(ve(x.label,x.price,x.reason));return}I.current!==x.price&&(I.current=x.price,Ne(ve(x.label,x.price,x.reason)))}},[x.price,x.label,x.reason,r.time,r.date,t]);const ur=async a=>{a.preventDefault(),h(null),J(null),Z(null),We(!0);const s=[];if(r.date||s.push("date"),r.date&&U(r.date)){$("order",1,"date"),N("order","validation_error"),h(t.orderForm.validation.datePast),S("date");return}if(r.time||s.push("time"),r.pickupType||s.push("pickupType"),r.pickupType==="airport"&&!r.flightUnknown&&!r.flightNumber.trim()&&s.push("flightNumber"),r.pickupType==="address"&&!r.address.trim()&&s.push("address"),r.name.trim()||s.push("name"),(!r.phone.trim()||!O)&&s.push("phone"),(!r.email.trim()||!_)&&s.push("email"),s.length>0){$("order",s.length,s[0]),N("order","validation_error"),S(s[0]);return}if(P(r.date,r.time)){$("order",1,"time"),N("order","validation_error"),h(t.orderForm.validation.timeSoon),S("time");return}const i=te(r.phone,t.orderForm.validation);if(i){$("order",1,"phone"),N("order","validation_error"),J(i),h(i);return}const l=se(r.email,t.orderForm.validation);if(l){$("order",1,"email"),N("order","validation_error"),Z(l),h(l);return}ue(!0);const g=vr(),u=kr({pickupType:r.pickupType,signService:r.pickupType==="airport"?r.signService:"self",signFee:ye,signText:r.signText,passengers:r.passengers,largeLuggage:r.largeLuggage,route:{from:C.from,to:C.to,type:C.type},notes:r.description.trim()}),y={carType:n.type==="bus"?1:2,pickupAddress:r.pickupType==="address"?r.address:C.from,proposedPrice:String(E),date:r.date,pickupTime:r.time,flightNumber:r.pickupType==="airport"?r.flightUnknown?"TBD":r.flightNumber:"N/A",fullName:r.name,emailAddress:r.email,phoneNumber:r.phone,additionalNotes:u,locale:ae};try{const b=await fetch(`${g}/api/orders`,{method:"POST",headers:{"Content-Type":"application/json","Accept-Language":ae},body:JSON.stringify(y)}),m=await b.json().catch(()=>null);if(!b.ok){N("order","error","api");const hr=m?.error??t.orderForm.submitError;h(hr);return}const D=m?.id??null;Ue(D),He(m?.generatedId??null),qe(!0),N("order","success"),mr(D)}catch{N("order","error","network"),h(t.orderForm.submitNetworkError)}finally{ue(!1)}},pr=a=>{const s=se(a,t.orderForm.validation);Z(s),!s&&L===W&&h(null)},p=a=>{M.current||(M.current=!0,Pe("order"));const{name:s,value:i}=a.target,l=H();if(s==="pickupType"&&(B("trip"),le(!1)),s==="date"&&i<l){v({...r,[s]:l});return}if(s==="date"){const g=i<l?l:i,u=r.time;L===t.orderForm.validation.timeSoon&&(P(g,u)||h(null)),v({...r,date:g,time:u});return}s==="time"&&L===t.orderForm.validation.timeSoon&&h(null),v({...r,[s]:i})},Se=a=>{M.current||(M.current=!0,Pe("order")),v(s=>({...s,signService:a,signText:a==="self"?"":s.signText}))},q=o.useRef(null),gr=()=>{if(le(!0),!r.pickupType){S("pickupType");return}if(!r.date||U(r.date)){S("date");return}if(!r.time){S("time");return}if(P(r.date,r.time)){h(t.orderForm.validation.timeSoon),S("time");return}B("details"),window.requestAnimationFrame(()=>{q.current?.scrollTo({top:0,behavior:"smooth"})})};return _e?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-xl max-w-md w-full p-8 relative",children:e.jsxs("div",{className:"bg-green-50 border-2 border-green-500 rounded-xl p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h3",{className:"text-green-900 mb-2",children:t.orderForm.submittedTitle}),e.jsx("p",{className:"text-green-800 mb-4",children:t.orderForm.submittedBody}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-green-700 mb-4",children:[e.jsx("span",{className:"inline-flex h-2.5 w-2.5 rounded-full bg-green-500 animate-pulse"}),e.jsx("span",{className:"text-sm",children:t.orderForm.awaiting})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 mb-2",children:[e.jsxs("p",{className:"text-gray-700",children:[t.orderForm.totalPrice," ",e.jsxs("span",{className:"font-bold text-blue-600",children:[E," PLN"]})]}),j&&e.jsx("div",{className:"mt-1 text-gray-500",children:e.jsx("span",{className:"eur-text",children:j})})]}),re(),G&&e.jsxs("div",{className:"bg-white rounded-lg p-4 mb-4",children:[ce&&e.jsxs("p",{className:"text-gray-700",children:[t.orderForm.orderNumber," ",e.jsx("span",{className:"font-semibold",children:ce})]}),e.jsxs("p",{className:"text-gray-700",children:[t.orderForm.orderId," ",e.jsx("span",{className:"font-semibold",children:G})]}),e.jsx("a",{href:`${Re}/?orderId=${G}`,className:"text-blue-600 hover:text-blue-700 text-sm underline",children:t.orderForm.manageLink})]}),e.jsx("button",{onClick:()=>{Te("order"),d()},className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors",children:t.common.close})]})})}):e.jsx("div",{className:"modal-overlay fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-hidden",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full my-8 max-h-[90vh] flex flex-col relative",children:[e.jsxs("div",{className:"p-6 border-b flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-gray-900",children:t.orderForm.title}),e.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:[C.from," ↔ ",C.to]}),f>0&&e.jsx("p",{className:"text-[11px] text-gray-600 mt-3",children:cr})]}),e.jsx("button",{onClick:()=>{Te("order"),d()},className:"text-gray-400 hover:text-gray-600 flex-shrink-0 ml-4",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:ur,autoComplete:"off",noValidate:!0,className:"booking-form flex-1 flex flex-col overflow-hidden cursor-default",children:[e.jsxs("div",{ref:q,className:`modal-scroll p-6 space-y-6 overflow-y-auto ${A==="details"?"order-form--details":""}`,children:[L&&e.jsx("div",{className:"bg-red-50 border-2 border-red-500 rounded-lg p-4 text-red-800",children:L}),A==="trip"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{id:"pickupType",tabIndex:-1,children:[e.jsx("label",{className:"block text-gray-700 mb-2",children:t.orderForm.pickupType}),e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:t.orderForm.pickupTypeHint}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("label",{className:`flex items-start gap-3 p-4 border-2 rounded-lg cursor-pointer transition-all ${r.pickupType==="airport"?"border-blue-500 bg-blue-50":we?"border-red-400 ring-1 ring-red-200":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("input",{type:"radio",name:"pickupType",value:"airport",checked:r.pickupType==="airport",onChange:p,className:"w-4 h-4 text-blue-600"}),e.jsx(Ae,{className:"w-5 h-5 text-gray-700"}),e.jsx("span",{className:"text-sm leading-snug",children:t.orderForm.airportPickup})]}),e.jsxs("label",{className:`flex items-start gap-3 p-4 border-2 rounded-lg cursor-pointer transition-all ${r.pickupType==="address"?"border-blue-500 bg-blue-50":we?"border-red-400 ring-1 ring-red-200":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("input",{type:"radio",name:"pickupType",value:"address",checked:r.pickupType==="address",onChange:p,className:"w-4 h-4 text-blue-600"}),e.jsx(De,{className:"w-5 h-5 text-gray-700"}),e.jsx("span",{className:"text-sm leading-snug",children:t.orderForm.addressPickup})]})]})]}),r.pickupType&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-700",children:t.orderForm.totalPrice}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:"text-blue-900 text-2xl",children:[E," PLN"]}),j&&e.jsx("div",{className:"text-gray-500",children:e.jsx("span",{className:"eur-text",children:j})})]})]})}),re(),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"date",className:"block text-gray-700 mb-2",children:[e.jsx(Er,{className:"w-4 h-4 inline mr-2"}),t.orderForm.date]}),e.jsx("input",{type:"date",id:"date",name:"date",value:r.date,onChange:p,min:H(),className:F("w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",nr),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"time",className:"block text-gray-700 mb-2",children:t.orderForm.pickupTime}),e.jsx("input",{type:"time",id:"time",name:"time",value:r.time,autoComplete:"off",onChange:p,onFocus:()=>ee(!0),onBlur:a=>{ee(!1),fe(!0),a.currentTarget.value&&P(r.date,a.currentTarget.value)&&h(t.orderForm.validation.timeSoon)},className:F("w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",or),required:!0}),!be&&Fe&&r.time&&ke&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.orderForm.validation.timeSoon})]})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("button",{type:"button",onClick:()=>{B("trip"),window.requestAnimationFrame(()=>{q.current?.scrollTo({top:0,behavior:"smooth"})})},className:"rounded-lg bg-blue-600 px-4 py-2 text-sm font-semibold text-white transition-colors hover:bg-blue-700",children:t.common.back})}),e.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-700",children:t.orderForm.totalPrice}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:"text-blue-900 text-2xl",children:[E," PLN"]}),j&&e.jsx("div",{className:"text-gray-500",children:e.jsx("span",{className:"eur-text",children:j})})]})]})}),re(),r.pickupType==="airport"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{id:"signService",tabIndex:-1,children:[e.jsx("label",{className:"block text-gray-700 mb-2",children:Qe}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsxs("label",{className:`flex items-center gap-3 p-4 border-2 rounded-lg cursor-pointer transition-all ${r.signService==="sign"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("input",{type:"radio",name:"signService",value:"sign",checked:r.signService==="sign",onChange:()=>Se("sign"),className:"w-4 h-4 text-blue-600"}),e.jsx(Le,{className:"w-5 h-5 text-gray-700"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-900",children:Xe}),e.jsx("div",{className:"text-xs text-gray-500",children:er})]})]}),e.jsxs("label",{className:`flex items-center gap-3 p-4 border-2 rounded-lg cursor-pointer transition-all ${r.signService==="self"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("input",{type:"radio",name:"signService",value:"self",checked:r.signService==="self",onChange:()=>Se("self"),className:"w-4 h-4 text-blue-600"}),e.jsx(Ee,{className:"w-5 h-5 text-gray-700 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-900",children:rr}),e.jsx("div",{className:"text-xs text-gray-500",children:tr})]})]})]})]}),r.signService==="sign"?e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"signText",className:"block text-gray-700 mb-2",children:[e.jsx(Le,{className:"w-4 h-4 inline mr-2"}),t.orderForm.signText]}),e.jsx("input",{type:"text",id:"signText",name:"signText",value:r.signText,onChange:p,placeholder:t.orderForm.signPlaceholder,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsxs("div",{className:"mt-3 bg-gradient-to-br from-amber-50 to-orange-50 border-2 border-amber-300 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx(Ce,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-amber-900",children:t.orderForm.signHelp})]}),e.jsxs("div",{className:"bg-white border-2 border-gray-300 rounded-lg p-4 shadow-sm",children:[e.jsx("p",{className:"text-[8px] text-gray-500 mb-2 text-center",children:t.orderForm.signPreview}),e.jsx("div",{className:"bg-white border-4 border-blue-900 rounded p-3 text-center min-h-[60px] flex items-center justify-center",children:e.jsx("p",{className:"text-blue-900 text-lg break-words",children:r.signText||r.name||t.orderForm.signEmpty})})]})]})]}):null,e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"flightNumber",className:"block text-gray-700 mb-2",children:[e.jsx(Ae,{className:"w-4 h-4 inline mr-2"}),t.orderForm.flightNumber]}),e.jsx("input",{type:"text",id:"flightNumber",name:"flightNumber",value:r.flightNumber,onChange:p,placeholder:t.orderForm.flightPlaceholder,className:F("w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",ar),disabled:r.flightUnknown,autoComplete:"off"}),e.jsxs("label",{className:"mt-2 flex items-center gap-2 text-sm text-gray-600",children:[e.jsx("input",{type:"checkbox",checked:r.flightUnknown,onChange:a=>{const s=a.target.checked;v(i=>({...i,flightUnknown:s,flightNumber:s?"":i.flightNumber}))}}),t.orderForm.flightUnknown]})]})]}),r.pickupType==="address"&&e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"address",className:"block text-gray-700 mb-2",children:[e.jsx(De,{className:"w-4 h-4 inline mr-2"}),t.orderForm.pickupAddress]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",id:"address",name:"address",value:r.address,onChange:p,onFocus:()=>K(!0),onBlur:()=>{window.setTimeout(()=>K(!1),150)},placeholder:t.orderForm.pickupPlaceholder,autoComplete:"street-address",className:F("w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",sr),required:!0}),Be&&oe.length>0&&e.jsx("div",{className:"absolute z-50 mt-2 w-full rounded-xl border border-slate-200 bg-white shadow-lg overflow-hidden",children:oe.slice(0,6).map(a=>e.jsx("button",{type:"button",className:"block w-full px-4 py-3 text-left text-sm text-slate-800 hover:bg-slate-50 focus:outline-none focus:bg-slate-50",onMouseDown:s=>{s.preventDefault(),v(i=>({...i,address:a.label})),T([]),K(!1),Me()},children:a.label},a.placeId))})]})]}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"passengers",className:"block text-gray-700 mb-2",children:[e.jsx(Ee,{className:"w-4 h-4 inline mr-2"}),t.orderForm.passengers]}),e.jsx("select",{id:"passengers",name:"passengers",value:r.passengers,onChange:p,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:n.type==="bus"?e.jsx(e.Fragment,{children:t.orderForm.passengersBus.map((a,s)=>e.jsx("option",{value:5+s,children:a},a))}):e.jsx(e.Fragment,{children:t.orderForm.passengersStandard.map((a,s)=>e.jsx("option",{value:1+s,children:a},a))})})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"largeLuggage",className:"block text-gray-700 mb-2",children:[e.jsx(wr,{className:"w-4 h-4 inline mr-2"}),t.orderForm.largeLuggage]}),e.jsxs("select",{id:"largeLuggage",name:"largeLuggage",value:r.largeLuggage,onChange:p,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"no",children:t.orderForm.luggageNo}),e.jsx("option",{value:"yes",children:t.orderForm.luggageYes})]})]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h4",{className:"text-gray-900 mb-4",children:t.orderForm.contactTitle}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-gray-700 mb-2",children:t.orderForm.fullName}),e.jsx("input",{type:"text",id:"name",name:"name",value:r.name,onChange:p,placeholder:t.orderForm.namePlaceholder,autoComplete:"name",className:F("w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",ir),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-gray-700 mb-2",children:t.orderForm.phoneNumber}),e.jsx("input",{type:"tel",id:"phone",name:"phone",value:r.phone,onChange:p,onBlur:Oe,inputMode:"tel",autoComplete:"tel",placeholder:"+48 123 456 789",className:F("w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",lr),required:!0}),me&&e.jsx("p",{className:"text-sm text-red-600 mt-2",children:me})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-gray-700 mb-2",children:t.orderForm.email}),e.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:a=>{p(a),pr(a.target.value)},placeholder:t.orderForm.emailPlaceholder,autoComplete:"email",className:F("w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",dr),required:!0}),W&&e.jsx("p",{className:"text-sm text-red-600 mt-2",children:W}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:t.orderForm.emailHelp})]}),e.jsxs("details",{className:"rounded-lg border border-gray-200 bg-gray-50 p-4",children:[e.jsx("summary",{className:"cursor-pointer text-sm font-semibold text-gray-800",children:t.orderForm.notesTitle}),e.jsxs("div",{className:"mt-3",children:[e.jsx("textarea",{id:"description",name:"description",value:r.description,onChange:p,placeholder:t.orderForm.notesPlaceholder,rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:t.orderForm.notesHelp})]})]})]})]})]})]}),e.jsx("div",{className:"order-actions-footer",children:A==="trip"?e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:gr,className:`order-actions-btn w-full py-4 rounded-lg transition-colors ${w?"bg-slate-200 text-slate-700 border border-slate-300 shadow-inner cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,disabled:w,style:{minHeight:"56px"},children:t.common.continue}),e.jsx("p",{className:"text-xs text-center text-gray-500 mt-2",children:t.orderForm.reassurance})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"order-actions-grid grid grid-cols-2 gap-2 sm:gap-3",children:[e.jsx("button",{type:"button",onClick:()=>{B("trip"),window.requestAnimationFrame(()=>{q.current?.scrollTo({top:0,behavior:"smooth"})})},className:`order-actions-btn w-full py-4 rounded-lg transition-colors ${w?"bg-slate-200 text-slate-700 border border-slate-300 shadow-inner cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,disabled:w,style:{minHeight:"56px"},children:t.common.back}),e.jsx("button",{type:"submit",className:`order-actions-btn w-full py-4 rounded-lg transition-colors ${w?"bg-slate-200 text-slate-700 border border-slate-300 shadow-inner cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,disabled:w,style:{minHeight:"56px"},children:w?t.orderForm.submitting:e.jsxs("span",{className:"flex flex-col items-center gap-1",children:[e.jsx("span",{children:t.orderForm.confirmOrder(E)}),j&&e.jsx("span",{className:"order-actions-eur text-[11px] text-blue-100",children:j})]})})]}),e.jsx("p",{className:"text-xs text-center text-gray-500 mt-2",children:t.orderForm.reassurance})]})})]})]})})}export{qr as OrderForm};
