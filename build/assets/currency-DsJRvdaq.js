import{r as f}from"./index-Dmt7aB5L.js";const p=()=>{const r="https://taxiairportgdansk.com";return r.trim()!==""?r:(console.warn("VITE_API_BASE_URL is not set; API calls will fail."),"")},u=1e3*60*60*6,d="eur-rate-cache";let a=null,c=0,o=null;const h=()=>a&&Date.now()-c<u?null:(o||(o=m().finally(()=>{o=null})),o),y=()=>{h()};async function m(){try{const r=p(),n=await fetch(`${r}/api/eur-rate`);if(!n.ok)return null;const e=await n.json(),t=typeof e?.rate=="number"?e.rate:null;if(t&&(a=t,c=Date.now(),typeof window<"u"))try{localStorage.setItem(d,JSON.stringify({rate:t,at:c}))}catch{}return t}catch{return null}}function g(){const[r,n]=f.useState(()=>{if(a&&Date.now()-c<u)return a;if(typeof window<"u")try{const e=localStorage.getItem(d);if(e){const t=JSON.parse(e);if(t?.rate&&t?.at&&Date.now()-t.at<u)return a=t.rate,c=t.at,t.rate}}catch{}return null});return f.useEffect(()=>{if(a&&Date.now()-c<u)return;let e=!1;const t=s=>{s.then(l=>{!e&&l&&n(l)}).catch(()=>null)},i=()=>{const s=h();s&&t(s)};o?t(o):i();const w=window.setTimeout(()=>{!e&&!a&&i()},1500);return()=>{e=!0,window.clearTimeout(w)}},[]),r}function R(r,n){return!n||!Number.isFinite(r)?null:`~${Math.round(r*n)}EUR`}export{R as f,p as g,y as p,g as u};
