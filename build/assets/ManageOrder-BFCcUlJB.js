import{d as F,u as Ue,e as _e,r as i,j as e,U as ie}from"./index-BMCh0NDd.js";import{u as Ie,f as de}from"./currency-B6wRPC3y.js";import{F as M,P as Me,L as Be,p as De,b as qe}from"./orderNotes-CNiqtRp0.js";import{g as ze}from"./api-KPPBra2D.js";import{M as ce}from"./map-pin-BUyjI69b.js";import{C as He}from"./calendar-Nyao_5lH.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],B=F("circle-alert",Je);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],oe=F("copy",Ve);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],me=F("square-pen",Ye);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],ge=F("trash-2",Ge),D=ze(),We=20,pe=()=>{const h=new Date,s=h.getFullYear(),O=String(h.getMonth()+1).padStart(2,"0"),T=String(h.getDate()).padStart(2,"0");return`${s}-${O}-${T}`},Ke=()=>{const h=new Date,s=String(h.getHours()).padStart(2,"0"),O=String(h.getMinutes()).padStart(2,"0");return`${s}:${O}`};function ts({orderId:h}){var K,Q;const{t:s,locale:O}=Ue(),T=O==="pl"?"pl":"en";_e(s.manageOrder.manageTitle);const ue=i.useMemo(()=>{var t;return(t=new URLSearchParams(window.location.search).get("token"))!=null?t:""},[]),xe=new URLSearchParams(window.location.search).get("cancelled")==="1",q=(K=new URLSearchParams(window.location.search).get("update"))!=null?K:"",k=i.useMemo(()=>new Set(q.split(",").map(t=>t.trim()).filter(Boolean)),[q]),he=k.size>0,[be,fe]=i.useState(!1),[je,E]=i.useState(!1),[a,z]=i.useState(null),[C,S]=i.useState(!1),[Ne,P]=i.useState(!1),[ye,ve]=i.useState(!1),[we,Qe]=i.useState(!1),[Oe,R]=i.useState(!1),[ke,$]=i.useState(!0),[w,g]=i.useState(null),[U,Se]=i.useState(""),[N,H]=i.useState(""),[j,Te]=i.useState(ue),[J,V]=i.useState(!1),[Ce,Le]=i.useState(0),[Y,_]=i.useState(null),I=i.useRef(null),G=Ie(),y=(a==null?void 0:a.status)==="pending"||(a==null?void 0:a.status)==="confirmed";a&&a.price<=0;const[r,v]=i.useState({signService:"self",signText:"",flightNumber:"",passengers:"1",largeLuggage:"no",date:"",time:"",name:"",email:"",phone:"",address:"",description:""}),m=he&&!be,l=t=>C&&(!m||k.has(t)),p=(t,d)=>{const c=m&&k.has(t);return`w-full px-4 py-3 border ${c?"border-red-400 bg-red-50":"border-gray-300"} rounded-lg ${d?"focus:ring-2 focus:ring-blue-500 focus:border-transparent":""} ${!d&&!c?"bg-gray-50":""}`};i.useEffect(()=>{N||j?(async()=>{var d,c,o,b,f,L,X;V(!0),$(!0),g(null);try{const Z=j?{accessToken:j}:{emailAddress:N},ee=await fetch(`${D}/api/orders/${h}/access`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Z)}),A=await ee.json().catch(()=>null);if(!ee.ok){g((d=A==null?void 0:A.error)!=null?d:s.manageOrder.errors.load);return}const n=A,x=De(n.additionalNotes),Ee=n.carType===1?"bus":"standard",Pe=(c=x.route)!=null?c:{from:n.pickupAddress,to:"Destination",type:Ee},se=x.pickupType==="airport"?"airport":"address",ae=x.signService==="sign"||x.signService==="self"?x.signService:x.signText?"sign":"self",re=(o=x.signText)!=null?o:"",te=(b=x.passengers)!=null?b:"1",ne=(f=x.largeLuggage)!=null?f:"no",le=typeof x.notes=="string"?x.notes:"",Re=Number(n.proposedPrice)||0,$e={id:n.id,generatedId:(L=n.generatedId)!=null?L:n.id.slice(0,4).toUpperCase(),route:Pe,pickupType:se,signService:ae,signText:re,flightNumber:n.flightNumber,passengers:te,largeLuggage:ne,date:n.date,time:n.pickupTime,name:n.fullName,email:n.emailAddress,phone:n.phoneNumber,price:Re,status:n.status==="confirmed"?"confirmed":n.status==="completed"?"completed":n.status==="failed"?"failed":n.status==="rejected"?"rejected":n.status==="price_proposed"?"price_proposed":"pending",pickupAddress:n.pickupAddress,description:le,rejectionReason:(X=n.rejectionReason)!=null?X:""};z($e),v({signService:ae,signText:re,flightNumber:n.flightNumber,passengers:te,largeLuggage:ne,date:n.date,time:n.pickupTime,name:n.fullName,email:n.emailAddress,phone:n.phoneNumber,address:se==="address"?n.pickupAddress:"",description:le})}catch{g(s.manageOrder.errors.loadNetwork)}finally{$(!1),V(!1)}})():$(!1)},[h,N,j,Ce]),i.useEffect(()=>{a&&m&&y&&S(!0)},[a,m,y]);const u=t=>{const{name:d,value:c}=t.target,o=pe(),b=Ke();if(d==="date"&&c<o){v({...r,[d]:o});return}if(d==="date"){const f=c<o?o:c,L=f===o&&r.time&&r.time<b?b:r.time;v({...r,date:f,time:L});return}v({...r,[d]:c})},Ae=async()=>{var o;if(!a)return;g(null);const t=qe({pickupType:a.pickupType,signService:a.pickupType==="airport"?r.signService:"self",signFee:a.pickupType==="airport"&&r.signService==="sign"?We:0,signText:r.signService==="sign"?r.signText:"",passengers:r.passengers,largeLuggage:r.largeLuggage,route:a.route,notes:r.description.trim()}),d=a.pickupType==="airport"||m&&k.has("flight"),c={carType:a.route.type==="bus"?1:2,pickupAddress:a.pickupType==="address"?r.address:a.route.from,proposedPrice:String(a.price),date:r.date,pickupTime:r.time,flightNumber:d?r.flightNumber:"N/A",fullName:r.name,emailAddress:r.email,currentEmailAddress:N,phoneNumber:r.phone,additionalNotes:t,adminUpdateRequest:m,adminUpdateFields:m?Array.from(k):[],locale:T};j?c.accessToken=j:c.currentEmailAddress=N;try{const b=await fetch(`${D}/api/orders/${a.id}`,{method:"PUT",headers:{"Content-Type":"application/json","Accept-Language":T},body:JSON.stringify(c)}),f=await b.json().catch(()=>null);if(!b.ok){g((o=f==null?void 0:f.error)!=null?o:s.manageOrder.errors.save);return}z({...a,signService:r.signService,signText:r.signService==="sign"?r.signText:"",flightNumber:c.flightNumber,passengers:r.passengers,largeLuggage:r.largeLuggage,date:r.date,time:r.time,name:r.name,email:r.email,phone:r.phone,pickupAddress:c.pickupAddress,description:r.description.trim(),status:a.status==="confirmed"&&!m?"pending":a.status}),!j&&r.email&&r.email!==N&&H(r.email),S(!1),m&&(fe(!0),E(!0)),m||R(!0)}catch{g(s.manageOrder.errors.saveNetwork)}},Fe=async()=>{var t;if(a){g(null);try{const d=j?{accessToken:j}:{emailAddress:N},c=await fetch(`${D}/api/orders/${a.id}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)});if(!c.ok){const o=await c.json().catch(()=>null);g((t=o==null?void 0:o.error)!=null?t:s.manageOrder.errors.cancel);return}ve(!0),P(!1)}catch{g(s.manageOrder.errors.cancelNetwork)}}},W=async(t,d)=>{try{await navigator.clipboard.writeText(t),_(s.manageOrder.errors.copySuccess)}catch{_(s.manageOrder.errors.copyFail)}I.current!==null&&window.clearTimeout(I.current),I.current=window.setTimeout(()=>{_(null)},2e3)};return ke?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"bg-white rounded-xl max-w-md w-full p-8 text-center",children:e.jsx("p",{className:"text-gray-700",children:s.manageOrder.loading})})}):w&&!a?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"bg-white rounded-xl max-w-md w-full p-8 text-center",children:e.jsx("p",{className:"text-red-700",children:w})})}):a?ye||xe?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"bg-white rounded-xl max-w-md w-full p-8",children:e.jsxs("div",{className:"bg-red-50 border-2 border-red-500 rounded-xl p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-500 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ge,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"text-red-900 mb-2",children:s.manageOrder.cancelledTitle}),e.jsx("p",{className:"text-red-800 mb-4",children:s.manageOrder.cancelledBody}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.orderForm.orderId," ",(Q=a==null?void 0:a.id)!=null?Q:h]})]})})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 py-12 px-4",children:[e.jsx("div",{className:"max-w-3xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden relative",children:[Y&&e.jsx("div",{className:"absolute right-6 top-6 bg-gray-900 text-white text-sm px-4 py-2 rounded-lg shadow-lg",children:Y}),e.jsxs("div",{className:"bg-blue-600 text-white p-6",children:[e.jsx("h1",{className:"text-2xl mb-2",children:s.manageOrder.manageTitle}),e.jsxs("div",{className:"space-y-2 text-blue-100 text-sm",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("span",{children:[s.manageOrder.orderLabel," ",a.generatedId]}),e.jsxs("button",{type:"button",onClick:()=>W(a.generatedId,s.manageOrder.copyOrderLabel),className:"inline-flex items-center gap-1 bg-white/15 hover:bg-white/25 px-2.5 py-1 rounded-full text-[8px]",children:[e.jsx(oe,{className:"w-3 h-3"}),s.manageOrder.copyAction]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("span",{children:[s.manageOrder.orderIdLabel,": ",a.id]}),e.jsxs("button",{type:"button",onClick:()=>W(a.id,s.manageOrder.copyOrderIdLabel),className:"inline-flex items-center gap-1 bg-white/15 hover:bg-white/25 px-2.5 py-1 rounded-full text-[8px]",children:[e.jsx(oe,{className:"w-3 h-3"}),s.manageOrder.copyAction]})]})]})]}),w&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 m-6",children:e.jsx("p",{className:"text-sm text-red-700",children:w})}),je&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>E(!1),children:e.jsx("div",{className:"bg-white rounded-xl max-w-md w-full p-8 relative",onClick:t=>t.stopPropagation(),children:e.jsxs("div",{className:"bg-green-50 border-2 border-green-500 rounded-xl p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h3",{className:"text-green-900 mb-2",children:s.manageOrder.detailsUpdatedTitle}),e.jsx("p",{className:"text-green-800 mb-4",children:s.manageOrder.detailsUpdatedBody(r.date,r.time)}),e.jsx("button",{onClick:()=>E(!1),className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors",children:s.common.close})]})})}),Oe&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>R(!1),children:e.jsx("div",{className:"bg-white rounded-xl max-w-md w-full p-8 relative",onClick:t=>t.stopPropagation(),children:e.jsxs("div",{className:"bg-yellow-50 border-2 border-yellow-400 rounded-xl p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-yellow-400 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(B,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"text-yellow-900 mb-2",children:s.manageOrder.updateSubmittedTitle}),e.jsx("p",{className:"text-yellow-800 mb-4",children:s.manageOrder.updateSubmittedBody}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-yellow-700 mb-4",children:[e.jsx("span",{className:"inline-flex h-2.5 w-2.5 rounded-full bg-yellow-500 animate-pulse"}),e.jsx("span",{className:"text-sm",children:s.manageOrder.awaiting})]}),e.jsx("button",{onClick:()=>R(!1),className:"bg-yellow-500 text-white px-6 py-2 rounded-lg hover:bg-yellow-600 transition-colors",children:s.common.close})]})})}),we&&null,e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-gray-900 mb-3",children:s.manageOrder.transferRoute}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"w-5 h-5 text-blue-600"}),e.jsxs("span",{className:"text-gray-700",children:[a.route.from," â†’ ",a.route.to]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"text-gray-700",children:[s.manageOrder.priceLabel," ",a.price>0?e.jsxs("span",{className:"font-bold text-blue-600",children:[a.price," PLN"]}):e.jsx("span",{className:"font-semibold text-blue-700",children:s.manageOrder.pricePending})]})}),a.price>0&&de(a.price,G)&&e.jsx("div",{className:"text-gray-500",children:e.jsx("span",{className:"eur-text",children:de(a.price,G)})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${a.status==="confirmed"?"bg-green-100 text-green-800":a.status==="completed"?"bg-emerald-100 text-emerald-800":a.status==="failed"?"bg-orange-100 text-orange-800":a.status==="rejected"?"bg-red-100 text-red-800":a.status==="price_proposed"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:a.status==="confirmed"?s.manageOrder.statusConfirmed:a.status==="completed"?s.manageOrder.statusCompleted:a.status==="failed"?s.manageOrder.statusFailed:a.status==="rejected"?s.manageOrder.statusRejected:a.status==="price_proposed"?s.manageOrder.statusPriceProposed:s.manageOrder.statusPending})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-gray-900",children:s.manageOrder.bookingDetails}),!C&&y&&e.jsxs("button",{onClick:()=>S(!0),className:"flex items-center gap-2 text-blue-600 hover:text-blue-700",children:[e.jsx(me,{className:"w-4 h-4"}),m?s.manageOrder.updateRequested:s.manageOrder.editDetails]})]}),!C&&a.status==="confirmed"&&!m&&e.jsx("div",{className:"mb-4 rounded-lg border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-900",children:s.manageOrder.confirmedEditNote}),m&&e.jsx("div",{className:"mb-4 rounded-lg border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-800",children:s.manageOrder.updateFieldsNote}),!y&&e.jsxs("div",{className:`border-l-4 p-4 ${a.status==="confirmed"?"bg-green-50 border-green-500":a.status==="completed"?"bg-emerald-50 border-emerald-500":a.status==="failed"?"bg-orange-50 border-orange-500":a.status==="price_proposed"?"bg-blue-50 border-blue-500":"bg-red-50 border-red-500"}`,children:[e.jsx("p",{className:`text-sm ${a.status==="confirmed"?"text-green-700":a.status==="completed"?"text-emerald-700":a.status==="failed"?"text-orange-700":a.status==="price_proposed"?"text-blue-700":"text-red-700"}`,children:a.status==="confirmed"?s.manageOrder.confirmedNote:a.status==="completed"?s.manageOrder.completedNote:a.status==="failed"?s.manageOrder.failedNote:a.status==="price_proposed"?s.manageOrder.priceProposedNote:s.manageOrder.rejectedNote}),a.status==="rejected"&&a.rejectionReason&&e.jsxs("p",{className:"mt-2 text-sm text-red-700",children:[s.manageOrder.rejectionReasonLabel," ",a.rejectionReason]})]}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"date",className:"block text-gray-700 mb-2",children:[e.jsx(He,{className:"w-4 h-4 inline mr-2"}),s.manageOrder.date]}),e.jsx("input",{type:"date",id:"date",name:"date",value:r.date,onChange:u,min:pe(),disabled:!l("date"),className:p("date",l("date"))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"time",className:"block text-gray-700 mb-2",children:s.manageOrder.pickupTime}),e.jsx("input",{type:"time",id:"time",name:"time",value:r.time,onChange:u,disabled:!l("time"),className:p("time",l("time"))})]})]}),a.pickupType==="airport"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 mb-2",children:s.manageOrder.signServiceTitle}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsxs("label",{className:`flex items-start gap-3 p-4 border-2 rounded-lg cursor-pointer transition-all ${r.signService==="sign"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("input",{type:"radio",name:"signService",value:"sign",checked:r.signService==="sign",onChange:()=>v(t=>({...t,signService:"sign"})),className:"w-4 h-4 text-blue-600",disabled:!l("signText")}),e.jsx(M,{className:"w-5 h-5 text-gray-700"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-900",children:s.manageOrder.signServiceSign}),e.jsx("div",{className:"text-xs text-gray-500",children:s.manageOrder.signServiceFee})]})]}),e.jsxs("label",{className:`flex items-start gap-3 p-4 border-2 rounded-lg cursor-pointer transition-all ${r.signService==="self"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("input",{type:"radio",name:"signService",value:"self",checked:r.signService==="self",onChange:()=>v(t=>({...t,signService:"self",signText:""})),className:"w-4 h-4 text-blue-600",disabled:!l("signText")}),e.jsx(ie,{className:"w-5 h-5 text-gray-700 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-900",children:s.manageOrder.signServiceSelf}),e.jsx("div",{className:"text-xs text-gray-500",children:s.manageOrder.signServiceSelfNote})]})]})]})]}),r.signService==="sign"&&e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"signText",className:"block text-gray-700 mb-2",children:[e.jsx(M,{className:"w-4 h-4 inline mr-2"}),s.manageOrder.signText]}),e.jsx("input",{type:"text",id:"signText",name:"signText",value:r.signText,onChange:u,disabled:!l("signText"),className:p("signText",l("signText"))})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"flightNumber",className:"block text-gray-700 mb-2",children:[e.jsx(Me,{className:"w-4 h-4 inline mr-2"}),s.manageOrder.flightNumber]}),e.jsx("input",{type:"text",id:"flightNumber",name:"flightNumber",value:r.flightNumber,onChange:u,disabled:!l("flight"),className:p("flight",l("flight"))})]})]}),a.pickupType==="address"&&e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"address",className:"block text-gray-700 mb-2",children:[e.jsx(ce,{className:"w-4 h-4 inline mr-2"}),s.manageOrder.pickupAddress]}),e.jsx("textarea",{id:"address",name:"address",value:r.address,onChange:u,disabled:!l("address"),rows:3,className:p("address",l("address"))})]}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"passengers",className:"block text-gray-700 mb-2",children:[e.jsx(ie,{className:"w-4 h-4 inline mr-2"}),s.manageOrder.passengers]}),e.jsx("select",{id:"passengers",name:"passengers",value:r.passengers,onChange:u,disabled:!l("passengers"),className:p("passengers",l("passengers")),children:a.route.type==="bus"?e.jsx(e.Fragment,{children:s.manageOrder.passengersBus.map((t,d)=>e.jsx("option",{value:5+d,children:t},t))}):e.jsx(e.Fragment,{children:s.manageOrder.passengersStandard.map((t,d)=>e.jsx("option",{value:1+d,children:t},t))})})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"largeLuggage",className:"block text-gray-700 mb-2",children:[e.jsx(Be,{className:"w-4 h-4 inline mr-2"}),s.manageOrder.largeLuggage]}),e.jsxs("select",{id:"largeLuggage",name:"largeLuggage",value:r.largeLuggage,onChange:u,disabled:!l("largeLuggage"),className:p("largeLuggage",l("largeLuggage")),children:[e.jsx("option",{value:"no",children:s.manageOrder.luggageNo}),e.jsx("option",{value:"yes",children:s.manageOrder.luggageYes})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-gray-900 mb-4",children:s.manageOrder.contactTitle}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-gray-700 mb-2",children:s.manageOrder.fullName}),e.jsx("input",{type:"text",id:"name",name:"name",value:r.name,onChange:u,disabled:!l("name"),className:p("name",l("name"))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-gray-700 mb-2",children:s.manageOrder.phoneNumber}),e.jsx("input",{type:"tel",id:"phone",name:"phone",value:r.phone,onChange:u,disabled:!l("phone"),className:p("phone",l("phone"))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-gray-700 mb-2",children:s.manageOrder.email}),e.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:u,disabled:!l("email"),className:p("email",l("email"))})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"description",className:"block text-gray-700 mb-2",children:[e.jsx(M,{className:"w-4 h-4 inline mr-2"}),s.manageOrder.notesTitle]}),e.jsx("textarea",{id:"description",name:"description",value:r.description,onChange:u,disabled:!l("description"),rows:3,className:p("description",l("description"))})]})]})]})]}),e.jsx("div",{className:"border-t pt-6 space-y-3",children:C?e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:Ae,className:"flex-1 bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors",disabled:!y,children:s.manageOrder.saveChanges}),e.jsx("button",{onClick:()=>{v({signService:a.signService,signText:a.signText,flightNumber:a.flightNumber,passengers:a.passengers,largeLuggage:a.largeLuggage,date:a.date,time:a.time,name:a.name,email:a.email,phone:a.phone,address:a.pickupType==="address"?a.pickupAddress:"",description:a.description}),S(!1)},className:"flex-1 bg-gray-200 text-gray-800 py-3 rounded-lg hover:bg-gray-300 transition-colors",children:s.manageOrder.cancelEdit})]}):e.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[y&&e.jsxs("button",{onClick:()=>S(!0),className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(me,{className:"w-5 h-5"}),s.manageOrder.editBooking]}),y&&e.jsxs("button",{onClick:()=>P(!0),className:"w-full bg-red-600 text-white py-3 rounded-lg hover:bg-red-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(ge,{className:"w-5 h-5"}),s.manageOrder.cancelBooking]})]})}),e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(B,{className:"h-5 w-5 text-yellow-400"})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-yellow-700",children:s.manageOrder.changesNotice})})]})})]})]})}),Ne&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(B,{className:"w-6 h-6 text-red-600"})}),e.jsx("h3",{className:"text-gray-900",children:s.manageOrder.cancelPromptTitle})]}),e.jsx("p",{className:"text-gray-700 mb-6",children:s.manageOrder.cancelPromptBody}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:Fe,className:"flex-1 bg-red-600 text-white py-3 rounded-lg hover:bg-red-700 transition-colors",children:s.manageOrder.confirmCancel}),e.jsx("button",{onClick:()=>P(!1),className:"flex-1 bg-gray-200 text-gray-800 py-3 rounded-lg hover:bg-gray-300 transition-colors",children:s.manageOrder.keepBooking})]})]})})]}):e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full p-8",children:[e.jsx("h2",{className:"text-xl text-gray-900 mb-4",children:s.manageOrder.accessTitle}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:s.manageOrder.accessBody}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"email",value:U,onChange:t=>Se(t.target.value),placeholder:s.manageOrder.accessPlaceholder,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0}),w&&e.jsx("div",{className:"bg-red-50 border-2 border-red-500 rounded-lg p-3 text-red-800 text-sm",children:w}),e.jsx("button",{onClick:()=>{if(!U){g(s.manageOrder.errors.emailRequired);return}g(null),Te(""),H(U.trim()),Le(t=>t+1)},className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-70",disabled:J,children:J?s.manageOrder.accessChecking:s.manageOrder.accessAction})]})]})})}export{ts as ManageOrder};
