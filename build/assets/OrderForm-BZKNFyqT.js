import{u as mr,r as o,j as e,l as ur,o as ke,M as Fe,p as L,q as N,v as Se,w as pr,x as gr}from"./index-DW624Vw6.js";import{u as hr,f as xr,g as br}from"./currency-BSxTt2nQ.js";import{P as Te,F as Ee,L as fr,b as yr}from"./orderNotes-B33ji_Pl.js";import{l as Nr,u as jr,i as vr}from"./scrollLock-BK_fv_5M.js";import{C as wr}from"./calendar-CvKC2a-9.js";import{U as Ce}from"./users-JB35QFjC.js";import{I as Pe}from"./info-M_bQl1WB.js";const Ae="AIzaSyCZn_Y7YkTDjJe8715PJ0jVbcwaim7kKFE",kr={lat:54.352,lon:18.6466},Fr=6e4,_=()=>{const n=new Date,d=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),m=String(n.getDate()).padStart(2,"0");return`${d}-${t}-${m}`},Sr=n=>n.trim(),Tr=(n,d)=>{const t=d/111320,m=d/(111320*Math.cos(n.lat*Math.PI/180));return{north:n.lat+t,south:n.lat-t,east:n.lon+m,west:n.lon-m}},Er=40,E=(n,d)=>{if(!n||!d)return!1;const t=new Date(`${n}T${d}:00`);if(Number.isNaN(t.getTime()))return!1;const m=new Date(Date.now()+Er*60*1e3);return t.getTime()<m.getTime()},U=n=>n?n<_():!1,ee=(n,d)=>{const t=n.trim();if(/[A-Za-z]/.test(t))return d.phoneLetters;const m=t.replace(/\D/g,"");return m.length<7||m.length>15?d.phoneLength:null},re=(n,d)=>{const t=n.trim();return t?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)?null:d.email:d.emailRequired};function Rr({route:n,onClose:d}){const{t,locale:m}=mr(),te=m==="pl"?"pl":"en",Le=ur(m),[se,H]=o.useState(!1),Y=o.useRef(null),D=o.useRef(null),[ae,S]=o.useState([]),[De,V]=o.useState(!1),[C,B]=o.useState("trip"),[ne,oe]=o.useState(!1),[r,j]=o.useState({pickupType:"",signService:"self",signText:"",flightNumber:"",flightUnknown:!1,passengers:"1",largeLuggage:"no",address:"",date:_(),time:"",name:"",phone:"",email:"",description:""});o.useEffect(()=>(Nr(),()=>jr()),[]),o.useEffect(()=>{if(typeof window>"u")return;const a=window.setTimeout(()=>{j(s=>({...s,time:""})),he(!1),Z(!1)},0);return()=>window.clearTimeout(a)},[]),o.useEffect(()=>{if(typeof window>"u")return;if(window.google?.maps){H(!0);return}const a=document.querySelector('script[data-google-maps="true"]');if(a){a.addEventListener("load",()=>H(!0),{once:!0});return}const s=document.createElement("script");s.src=`https://maps.googleapis.com/maps/api/js?key=${encodeURIComponent(Ae)}&loading=async&v=weekly`,s.async=!0,s.defer=!0,s.dataset.googleMaps="true",s.addEventListener("load",()=>H(!0)),document.head.appendChild(s)},[]);const ie=async()=>{if(!se)return null;const a=window.google;if(!a?.maps?.importLibrary)return null;if(Y.current)return Y.current;const s=await a.maps.importLibrary("places");return Y.current=s,s},Be=async()=>{const a=await ie();return a?(D.current||(D.current=new a.AutocompleteSessionToken),D.current):null},Ie=()=>{D.current=null},Re=()=>{const a=ee(r.phone,t.orderForm.validation);z(a)},[$e,Me]=o.useState(!1),[K,qe]=o.useState(null),[le,Oe]=o.useState(null),[P,h]=o.useState(null),[de,z]=o.useState(null),[G,J]=o.useState(null),[v,ce]=o.useState(!1),[Ue,_e]=o.useState(n.priceDay),[x,He]=o.useState({label:t.orderForm.rate.day,reason:t.orderForm.rate.reasonDay,price:n.priceDay}),[me,Ye]=o.useState(null),I=o.useRef(null),W=o.useRef(null),[ue,Q]=o.useState(null),[pe,Ve]=o.useState(null),Ke=hr(),R=o.useRef(!1),[ge,ze]=o.useState(!1),[Ge,he]=o.useState(!1),[xe,Z]=o.useState(!1),be=r.pickupType==="airport"&&r.signService==="sign"?20:0,T=Ue+be,y=xr(T,Ke),A=r.pickupType==="address"?{from:n.to,to:n.from,type:n.type}:n,Je=t.orderForm.signServiceTitle??"Airport pickup options",We=t.orderForm.signServiceSign??"Meet with a name sign",Qe=t.orderForm.signServiceFee??"+20 PLN added to final price",Ze=t.orderForm.signServiceSelf??"Find the driver yourself",Xe=t.orderForm.signServiceSelfNote??"",$=!ee(r.phone,t.orderForm.validation),M=!re(r.email,t.orderForm.validation),fe=a=>{Ye(a),W.current!==null&&(window.clearTimeout(W.current),W.current=null)},X=()=>me?e.jsx("div",{className:"mt-3 bg-gradient-to-br from-amber-50 to-orange-50 border-2 border-amber-300 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Pe,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-amber-900",children:me})]})}):null,w=C==="trip"?ne:ge,ye=w&&!r.pickupType,er=w&&r.pickupType==="address"&&!r.address.trim(),rr=w&&r.pickupType==="airport"&&!r.flightUnknown&&!r.flightNumber.trim(),tr=w&&(!r.date||U(r.date)),Ne=E(r.date,r.time),je=(C==="trip"?ne:ge)||Ge,sr=je&&!xe&&(!r.time||Ne),ar=w&&!r.name.trim(),nr=w&&(!r.phone.trim()||!$),or=w&&(!r.email.trim()||!M),k=(a,s)=>`${a}${s?" border-red-400 bg-red-50 focus:ring-red-200 focus:border-red-500":""}`,ve=o.useMemo(()=>{const a=!!r.date&&!U(r.date),s=!!r.time&&!E(r.date,r.time),l=!!r.pickupType,i=r.pickupType==="address"?!!r.address.trim():!0,g=r.pickupType==="airport"?r.flightUnknown?!0:!!r.flightNumber.trim():!0,u=!!r.name.trim(),f=!!r.phone.trim()&&$,b=!!r.email.trim()&&M;return[l,a,s,i,g,u,f,b].filter(O=>!O).length},[r.date,r.time,r.pickupType,r.address,r.flightUnknown,r.flightNumber,r.name,r.phone,r.email,$,M]),F=a=>{typeof window>"u"||window.requestAnimationFrame(()=>{const s=document.getElementById(a);s&&(s.scrollIntoView({behavior:"smooth",block:"center"}),s instanceof HTMLElement&&s.focus({preventScroll:!0}))})},ir=()=>{if(typeof window>"u"||!pr())return;const a=window.gtag;typeof a=="function"&&gr()&&a("event","conversion",{send_to:"AW-17848598074/JQ0kCLvpq9sbELr8775C",value:1,currency:"PLN"})};o.useEffect(()=>{if(r.pickupType!=="address"){S([]);return}const a=Sr(r.address);if(a.length<3){S([]);return}let s=!0;const l=window.setTimeout(async()=>{try{const i=await ie();if(!i){S([]);return}const g=await Be(),u={input:a,region:"pl",language:m,locationBias:Tr(kr,Fr),sessionToken:g??void 0},{suggestions:f}=await i.AutocompleteSuggestion.fetchAutocompleteSuggestions(u),b=(Array.isArray(f)?f:[]).map(c=>c.placePrediction).filter(c=>c?.placeId).map(c=>({label:typeof c?.text?.text=="string"?c.text.text:c?.text?.toString?.()??"",placeId:String(c.placeId??"")})).filter(c=>c.label&&c.placeId);if(!s)return;S(b)}catch{if(!s)return;S([])}},350);return()=>{s=!1,window.clearTimeout(l)}},[r.address,r.pickupType,m,se]),o.useEffect(()=>{if(typeof window>"u")return;const a=r.date?new Date(`${r.date}T00:00:00`).getFullYear():new Date().getFullYear();if(!Number.isFinite(a)||pe===a)return;Ve(a);const s=`pl-holidays-${a}`,l=window.localStorage.getItem(s);if(l)try{const i=JSON.parse(l);if(Array.isArray(i)){Q(new Set(i));return}}catch{}fetch(`https://date.nager.at/api/v3/PublicHolidays/${a}/PL`).then(i=>i.ok?i.json():[]).then(i=>{const g=Array.isArray(i)?i.map(u=>u.date).filter(u=>!!u):[];Q(new Set(g)),window.localStorage.setItem(s,JSON.stringify(g))}).catch(()=>{Q(null)})},[r.date,pe]),o.useEffect(()=>{let a=!1;const s=[];if(r.time){const[i,g]=r.time.split(":").map(Number),u=i*60+g+30,f=Math.floor(u/60)%24,b=f>=22||f<6;b&&s.push(t.orderForm.rate.reasonLate),a=a||b}if(r.date){const i=new Date(`${r.date}T00:00:00`);!Number.isNaN(i.getTime())&&vr(i,ue)&&(s.push(t.orderForm.rate.reasonHoliday),a=!0)}const l=a?n.priceNight:n.priceDay;_e(l),He({label:a?t.orderForm.rate.night:t.orderForm.rate.day,reason:s.length?s.join(" + "):t.orderForm.rate.reasonDay,price:l})},[r.time,r.date,ue,n.priceDay,n.priceNight,t]),o.useEffect(()=>{if(!(!r.time&&!r.date)){if(I.current===null){I.current=x.price,fe(t.orderForm.rate.banner(x.label,x.price,x.reason));return}I.current!==x.price&&(I.current=x.price,fe(t.orderForm.rate.banner(x.label,x.price,x.reason)))}},[x.price,x.label,x.reason,r.time,r.date,t]);const lr=async a=>{a.preventDefault(),h(null),z(null),J(null),ze(!0);const s=[];if(r.date||s.push("date"),r.date&&U(r.date)){L("order",1,"date"),N("order","validation_error"),h(t.orderForm.validation.datePast),F("date");return}if(r.time||s.push("time"),r.pickupType||s.push("pickupType"),r.pickupType==="airport"&&!r.flightUnknown&&!r.flightNumber.trim()&&s.push("flightNumber"),r.pickupType==="address"&&!r.address.trim()&&s.push("address"),r.name.trim()||s.push("name"),(!r.phone.trim()||!$)&&s.push("phone"),(!r.email.trim()||!M)&&s.push("email"),s.length>0){L("order",s.length,s[0]),N("order","validation_error"),F(s[0]);return}if(E(r.date,r.time)){L("order",1,"time"),N("order","validation_error"),h(t.orderForm.validation.timeSoon),F("time");return}const l=ee(r.phone,t.orderForm.validation);if(l){L("order",1,"phone"),N("order","validation_error"),z(l),h(l);return}const i=re(r.email,t.orderForm.validation);if(i){L("order",1,"email"),N("order","validation_error"),J(i),h(i);return}ce(!0);const g=br(),u=yr({pickupType:r.pickupType,signService:r.pickupType==="airport"?r.signService:"self",signFee:be,signText:r.signText,passengers:r.passengers,largeLuggage:r.largeLuggage,route:{from:A.from,to:A.to,type:A.type},notes:r.description.trim()}),f={carType:n.type==="bus"?1:2,pickupAddress:r.pickupType==="address"?r.address:n.from,proposedPrice:String(T),date:r.date,pickupTime:r.time,flightNumber:r.pickupType==="airport"?r.flightUnknown?"TBD":r.flightNumber:"N/A",fullName:r.name,emailAddress:r.email,phoneNumber:r.phone,additionalNotes:u,locale:te};try{const b=await fetch(`${g}/api/orders`,{method:"POST",headers:{"Content-Type":"application/json","Accept-Language":te},body:JSON.stringify(f)}),c=await b.json().catch(()=>null);if(!b.ok){N("order","error","api");const O=c?.error??t.orderForm.submitError;h(O);return}qe(c?.id??null),Oe(c?.generatedId??null),Me(!0),N("order","success"),ir()}catch{N("order","error","network"),h(t.orderForm.submitNetworkError)}finally{ce(!1)}},dr=a=>{const s=re(a,t.orderForm.validation);J(s),!s&&P===G&&h(null)},p=a=>{R.current||(R.current=!0,Se("order"));const{name:s,value:l}=a.target,i=_();if(s==="pickupType"&&(B("trip"),oe(!1)),s==="date"&&l<i){j({...r,[s]:i});return}if(s==="date"){const g=l<i?i:l,u=r.time;P===t.orderForm.validation.timeSoon&&(E(g,u)||h(null)),j({...r,date:g,time:u});return}s==="time"&&P===t.orderForm.validation.timeSoon&&h(null),j({...r,[s]:l})},we=a=>{R.current||(R.current=!0,Se("order")),j(s=>({...s,signService:a,signText:a==="self"?"":s.signText}))},q=o.useRef(null),cr=()=>{if(oe(!0),!r.pickupType){F("pickupType");return}if(!r.date||U(r.date)){F("date");return}if(!r.time){F("time");return}if(E(r.date,r.time)){h(t.orderForm.validation.timeSoon),F("time");return}B("details"),window.requestAnimationFrame(()=>{q.current?.scrollTo({top:0,behavior:"smooth"})})};return $e?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-xl max-w-md w-full p-8 relative",children:e.jsxs("div",{className:"bg-green-50 border-2 border-green-500 rounded-xl p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h3",{className:"text-green-900 mb-2",children:t.orderForm.submittedTitle}),e.jsx("p",{className:"text-green-800 mb-4",children:t.orderForm.submittedBody}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-green-700 mb-4",children:[e.jsx("span",{className:"inline-flex h-2.5 w-2.5 rounded-full bg-green-500 animate-pulse"}),e.jsx("span",{className:"text-sm",children:t.orderForm.awaiting})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 mb-2",children:[e.jsxs("p",{className:"text-gray-700",children:[t.orderForm.totalPrice," ",e.jsxs("span",{className:"font-bold text-blue-600",children:[T," PLN"]})]}),y&&e.jsx("div",{className:"mt-1 text-gray-500",children:e.jsx("span",{className:"eur-text",children:y})})]}),X(),K&&e.jsxs("div",{className:"bg-white rounded-lg p-4 mb-4",children:[le&&e.jsxs("p",{className:"text-gray-700",children:[t.orderForm.orderNumber," ",e.jsx("span",{className:"font-semibold",children:le})]}),e.jsxs("p",{className:"text-gray-700",children:[t.orderForm.orderId," ",e.jsx("span",{className:"font-semibold",children:K})]}),e.jsx("a",{href:`${Le}/?orderId=${K}`,className:"text-blue-600 hover:text-blue-700 text-sm underline",children:t.orderForm.manageLink})]}),e.jsx("button",{onClick:()=>{ke("order"),d()},className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors",children:t.common.close})]})})}):e.jsx("div",{className:"modal-overlay fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-hidden",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full my-8 max-h-[90vh] flex flex-col relative",children:[e.jsxs("div",{className:"p-6 border-b flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-gray-900",children:t.orderForm.title}),e.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:[A.from," â†” ",A.to]}),ve>0&&e.jsx("p",{className:"text-[11px] text-gray-600 mt-3",children:t.common.remainingFields(ve)})]}),e.jsx("button",{onClick:()=>{ke("order"),d()},className:"text-gray-400 hover:text-gray-600 flex-shrink-0 ml-4",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:lr,autoComplete:"off",noValidate:!0,className:"booking-form flex-1 flex flex-col overflow-hidden cursor-default",children:[e.jsxs("div",{ref:q,className:`modal-scroll p-6 space-y-6 overflow-y-auto ${C==="details"?"order-form--details":""}`,children:[P&&e.jsx("div",{className:"bg-red-50 border-2 border-red-500 rounded-lg p-4 text-red-800",children:P}),C==="trip"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{id:"pickupType",tabIndex:-1,children:[e.jsx("label",{className:"block text-gray-700 mb-2",children:t.orderForm.pickupType}),e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:t.orderForm.pickupTypeHint}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("label",{className:`flex items-start gap-3 p-4 border-2 rounded-lg cursor-pointer transition-all ${r.pickupType==="airport"?"border-blue-500 bg-blue-50":ye?"border-red-400 ring-1 ring-red-200":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("input",{type:"radio",name:"pickupType",value:"airport",checked:r.pickupType==="airport",onChange:p,className:"w-4 h-4 text-blue-600"}),e.jsx(Te,{className:"w-5 h-5 text-gray-700"}),e.jsx("span",{className:"text-sm leading-snug",children:t.orderForm.airportPickup})]}),e.jsxs("label",{className:`flex items-start gap-3 p-4 border-2 rounded-lg cursor-pointer transition-all ${r.pickupType==="address"?"border-blue-500 bg-blue-50":ye?"border-red-400 ring-1 ring-red-200":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("input",{type:"radio",name:"pickupType",value:"address",checked:r.pickupType==="address",onChange:p,className:"w-4 h-4 text-blue-600"}),e.jsx(Fe,{className:"w-5 h-5 text-gray-700"}),e.jsx("span",{className:"text-sm leading-snug",children:t.orderForm.addressPickup})]})]})]}),r.pickupType&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-700",children:t.orderForm.totalPrice}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:"text-blue-900 text-2xl",children:[T," PLN"]}),y&&e.jsx("div",{className:"text-gray-500",children:e.jsx("span",{className:"eur-text",children:y})})]})]})}),X(),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"date",className:"block text-gray-700 mb-2",children:[e.jsx(wr,{className:"w-4 h-4 inline mr-2"}),t.orderForm.date]}),e.jsx("input",{type:"date",id:"date",name:"date",value:r.date,onChange:p,min:_(),className:k("w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",tr),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"time",className:"block text-gray-700 mb-2",children:t.orderForm.pickupTime}),e.jsx("input",{type:"time",id:"time",name:"time",value:r.time,autoComplete:"off",onChange:p,onFocus:()=>Z(!0),onBlur:a=>{Z(!1),he(!0),a.currentTarget.value&&E(r.date,a.currentTarget.value)&&h(t.orderForm.validation.timeSoon)},className:k("w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",sr),required:!0}),!xe&&je&&r.time&&Ne&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.orderForm.validation.timeSoon})]})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("button",{type:"button",onClick:()=>{B("trip"),window.requestAnimationFrame(()=>{q.current?.scrollTo({top:0,behavior:"smooth"})})},className:"rounded-lg bg-blue-600 px-4 py-2 text-sm font-semibold text-white transition-colors hover:bg-blue-700",children:t.common.back})}),e.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-700",children:t.orderForm.totalPrice}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:"text-blue-900 text-2xl",children:[T," PLN"]}),y&&e.jsx("div",{className:"text-gray-500",children:e.jsx("span",{className:"eur-text",children:y})})]})]})}),X(),r.pickupType==="airport"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{id:"signService",tabIndex:-1,children:[e.jsx("label",{className:"block text-gray-700 mb-2",children:Je}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsxs("label",{className:`flex items-center gap-3 p-4 border-2 rounded-lg cursor-pointer transition-all ${r.signService==="sign"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("input",{type:"radio",name:"signService",value:"sign",checked:r.signService==="sign",onChange:()=>we("sign"),className:"w-4 h-4 text-blue-600"}),e.jsx(Ee,{className:"w-5 h-5 text-gray-700"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-900",children:We}),e.jsx("div",{className:"text-xs text-gray-500",children:Qe})]})]}),e.jsxs("label",{className:`flex items-center gap-3 p-4 border-2 rounded-lg cursor-pointer transition-all ${r.signService==="self"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("input",{type:"radio",name:"signService",value:"self",checked:r.signService==="self",onChange:()=>we("self"),className:"w-4 h-4 text-blue-600"}),e.jsx(Ce,{className:"w-5 h-5 text-gray-700 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-900",children:Ze}),e.jsx("div",{className:"text-xs text-gray-500",children:Xe})]})]})]})]}),r.signService==="sign"?e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"signText",className:"block text-gray-700 mb-2",children:[e.jsx(Ee,{className:"w-4 h-4 inline mr-2"}),t.orderForm.signText]}),e.jsx("input",{type:"text",id:"signText",name:"signText",value:r.signText,onChange:p,placeholder:t.orderForm.signPlaceholder,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsxs("div",{className:"mt-3 bg-gradient-to-br from-amber-50 to-orange-50 border-2 border-amber-300 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx(Pe,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-amber-900",children:t.orderForm.signHelp})]}),e.jsxs("div",{className:"bg-white border-2 border-gray-300 rounded-lg p-4 shadow-sm",children:[e.jsx("p",{className:"text-[8px] text-gray-500 mb-2 text-center",children:t.orderForm.signPreview}),e.jsx("div",{className:"bg-white border-4 border-blue-900 rounded p-3 text-center min-h-[60px] flex items-center justify-center",children:e.jsx("p",{className:"text-blue-900 text-lg break-words",children:r.signText||r.name||t.orderForm.signEmpty})})]})]})]}):null,e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"flightNumber",className:"block text-gray-700 mb-2",children:[e.jsx(Te,{className:"w-4 h-4 inline mr-2"}),t.orderForm.flightNumber]}),e.jsx("input",{type:"text",id:"flightNumber",name:"flightNumber",value:r.flightNumber,onChange:p,placeholder:t.orderForm.flightPlaceholder,className:k("w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rr),disabled:r.flightUnknown,autoComplete:"off"}),e.jsxs("label",{className:"mt-2 flex items-center gap-2 text-sm text-gray-600",children:[e.jsx("input",{type:"checkbox",checked:r.flightUnknown,onChange:a=>{const s=a.target.checked;j(l=>({...l,flightUnknown:s,flightNumber:s?"":l.flightNumber}))}}),t.orderForm.flightUnknown]})]})]}),r.pickupType==="address"&&e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"address",className:"block text-gray-700 mb-2",children:[e.jsx(Fe,{className:"w-4 h-4 inline mr-2"}),t.orderForm.pickupAddress]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",id:"address",name:"address",value:r.address,onChange:p,onFocus:()=>V(!0),onBlur:()=>{window.setTimeout(()=>V(!1),150)},placeholder:t.orderForm.pickupPlaceholder,autoComplete:"street-address",className:k("w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",er),required:!0}),De&&ae.length>0&&e.jsx("div",{className:"absolute z-50 mt-2 w-full rounded-xl border border-slate-200 bg-white shadow-lg overflow-hidden",children:ae.slice(0,6).map(a=>e.jsx("button",{type:"button",className:"block w-full px-4 py-3 text-left text-sm text-slate-800 hover:bg-slate-50 focus:outline-none focus:bg-slate-50",onMouseDown:s=>{s.preventDefault(),j(l=>({...l,address:a.label})),S([]),V(!1),Ie()},children:a.label},a.placeId))})]})]}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"passengers",className:"block text-gray-700 mb-2",children:[e.jsx(Ce,{className:"w-4 h-4 inline mr-2"}),t.orderForm.passengers]}),e.jsx("select",{id:"passengers",name:"passengers",value:r.passengers,onChange:p,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:n.type==="bus"?e.jsx(e.Fragment,{children:t.orderForm.passengersBus.map((a,s)=>e.jsx("option",{value:5+s,children:a},a))}):e.jsx(e.Fragment,{children:t.orderForm.passengersStandard.map((a,s)=>e.jsx("option",{value:1+s,children:a},a))})})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"largeLuggage",className:"block text-gray-700 mb-2",children:[e.jsx(fr,{className:"w-4 h-4 inline mr-2"}),t.orderForm.largeLuggage]}),e.jsxs("select",{id:"largeLuggage",name:"largeLuggage",value:r.largeLuggage,onChange:p,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"no",children:t.orderForm.luggageNo}),e.jsx("option",{value:"yes",children:t.orderForm.luggageYes})]})]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h4",{className:"text-gray-900 mb-4",children:t.orderForm.contactTitle}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-gray-700 mb-2",children:t.orderForm.fullName}),e.jsx("input",{type:"text",id:"name",name:"name",value:r.name,onChange:p,placeholder:t.orderForm.namePlaceholder,autoComplete:"name",className:k("w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",ar),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-gray-700 mb-2",children:t.orderForm.phoneNumber}),e.jsx("input",{type:"tel",id:"phone",name:"phone",value:r.phone,onChange:p,onBlur:Re,inputMode:"tel",autoComplete:"tel",placeholder:"+48 123 456 789",className:k("w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",nr),required:!0}),de&&e.jsx("p",{className:"text-sm text-red-600 mt-2",children:de})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-gray-700 mb-2",children:t.orderForm.email}),e.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:a=>{p(a),dr(a.target.value)},placeholder:t.orderForm.emailPlaceholder,autoComplete:"email",className:k("w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",or),required:!0}),G&&e.jsx("p",{className:"text-sm text-red-600 mt-2",children:G}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:t.orderForm.emailHelp})]}),e.jsxs("details",{className:"rounded-lg border border-gray-200 bg-gray-50 p-4",children:[e.jsx("summary",{className:"cursor-pointer text-sm font-semibold text-gray-800",children:t.orderForm.notesTitle}),e.jsxs("div",{className:"mt-3",children:[e.jsx("textarea",{id:"description",name:"description",value:r.description,onChange:p,placeholder:t.orderForm.notesPlaceholder,rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:t.orderForm.notesHelp})]})]})]})]})]})]}),e.jsx("div",{className:"order-actions-footer",children:C==="trip"?e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:cr,className:`order-actions-btn w-full py-4 rounded-lg transition-colors ${v?"bg-slate-200 text-slate-700 border border-slate-300 shadow-inner cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,disabled:v,style:{minHeight:"56px"},children:t.common.continue}),e.jsx("p",{className:"text-xs text-center text-gray-500 mt-2",children:t.orderForm.reassurance})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"order-actions-grid grid grid-cols-2 gap-2 sm:gap-3",children:[e.jsx("button",{type:"button",onClick:()=>{B("trip"),window.requestAnimationFrame(()=>{q.current?.scrollTo({top:0,behavior:"smooth"})})},className:`order-actions-btn w-full py-4 rounded-lg transition-colors ${v?"bg-slate-200 text-slate-700 border border-slate-300 shadow-inner cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,disabled:v,style:{minHeight:"56px"},children:t.common.back}),e.jsx("button",{type:"submit",className:`order-actions-btn w-full py-4 rounded-lg transition-colors ${v?"bg-slate-200 text-slate-700 border border-slate-300 shadow-inner cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,disabled:v,style:{minHeight:"56px"},children:v?t.orderForm.submitting:e.jsxs("span",{className:"flex flex-col items-center gap-1",children:[e.jsx("span",{children:t.orderForm.confirmOrder(T)}),y&&e.jsx("span",{className:"order-actions-eur text-[11px] text-blue-100",children:y})]})})]}),e.jsx("p",{className:"text-xs text-center text-gray-500 mt-2",children:t.orderForm.reassurance})]})})]})]})})}export{Rr as OrderForm};
