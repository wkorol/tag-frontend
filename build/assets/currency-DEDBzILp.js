import{r as f}from"./index-BFyiw9Zb.js";const u=1e3*60*60*6,w="eur-rate-cache";let a=null,c=0,i=null;const h=()=>a&&Date.now()-c<u?null:(i||(i=m().finally(()=>{i=null})),i),p=()=>{h()};async function m(){try{const r=await fetch("/api/eur-rate");if(!r.ok)return null;const o=await r.json(),e=typeof o?.rate=="number"?o.rate:null;if(e&&(a=e,c=Date.now(),typeof window<"u"))try{localStorage.setItem(w,JSON.stringify({rate:e,at:c}))}catch{}return e}catch{return null}}function y(){const[r,o]=f.useState(()=>{if(a&&Date.now()-c<u)return a;if(typeof window<"u")try{const e=localStorage.getItem(w);if(e){const t=JSON.parse(e);if(t?.rate&&t?.at&&Date.now()-t.at<u)return a=t.rate,c=t.at,t.rate}}catch{}return null});return f.useEffect(()=>{if(a&&Date.now()-c<u)return;let e=!1;const t=s=>{s.then(d=>{!e&&d&&o(d)}).catch(()=>null)};i&&t(i);const l=()=>{const s=h();s&&t(s)},n=()=>{l(),window.removeEventListener("scroll",n),window.removeEventListener("click",n),window.removeEventListener("touchstart",n)};typeof window<"u"&&(window.addEventListener("scroll",n,{passive:!0,once:!0}),window.addEventListener("click",n,{once:!0}),window.addEventListener("touchstart",n,{passive:!0,once:!0}));const E=window.setTimeout(l,8e3);return()=>{e=!0,window.removeEventListener("scroll",n),window.removeEventListener("click",n),window.removeEventListener("touchstart",n),window.clearTimeout(E)}},[]),r}function L(r,o){return!o||!Number.isFinite(r)?null:`~${Math.round(r*o)}EUR`}export{L as f,p,y as u};
